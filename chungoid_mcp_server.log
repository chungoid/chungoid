2025-05-04 07:42:40,332 - root - INFO - File logging configured to chungoid_mcp_server.log
2025-05-04 07:42:40,332 - utils.logger_setup - INFO - Logging setup complete. Level: INFO
2025-05-04 07:42:40,332 - chungoidmcp - INFO - [EARLY CHECK 192984] Logging configured. __name__ = 'chungoidmcp'
2025-05-04 07:42:40,332 - chungoidmcp - INFO - Initializing Chungoid MCP Server components at module level...
2025-05-04 07:42:40,332 - chungoidmcp - INFO - Chungoid base directory determined as: /home/flip/Desktop/chungoid-mcp/chungoid-core
2025-05-04 07:42:40,333 - mcp.server.lowlevel.server - DEBUG - Initializing server 'ChungoidMCP'
2025-05-04 07:42:40,334 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-05-04 07:42:40,334 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-05-04 07:42:40,334 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-05-04 07:42:40,334 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-05-04 07:42:40,334 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-05-04 07:42:40,334 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-05-04 07:42:40,334 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-05-04 07:42:40,334 - chungoidmcp - INFO - Root logger handlers AFTER FastMCP init: [<StreamHandler <_io.FileIO name=8 mode='rb+' closefd=True> (INFO)>, <RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,334 - chungoidmcp - INFO - FastMCP instance created. StateManager initialization deferred to tool calls.
2025-05-04 07:42:40,344 - chungoidmcp - INFO - --- Inspecting Registered MCP Tools ---
2025-05-04 07:42:40,344 - chungoidmcp - WARNING - Could not access or inspect mcp.tools registry.
2025-05-04 07:42:40,344 - chungoidmcp - INFO - -------------------------------------
2025-05-04 07:42:40,355 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,355 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:42:40,355 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,355 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:42:40,356 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,356 - chungoidmcp - INFO - Getting project status for: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,356 - chungoidmcp - INFO - Successfully retrieved project status from /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,434 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,434 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:42:40,435 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,435 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:42:40,435 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,435 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:42:40,435 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,435 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,436 - utils.state_manager - INFO - Successfully added root RotatingFileHandler to utils.state_manager logger.
2025-05-04 07:42:40,436 - utils.state_manager - INFO - Successfully added root RotatingFileHandler to utils.state_manager logger.
2025-05-04 07:42:40,436 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,436 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,436 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,436 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,436 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,436 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,436 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:42:40,436 - utils.chroma_utils - INFO - Initializing HttpClient with host: localhost, port: 8000
2025-05-04 07:42:40,551 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/auth/identity "HTTP/1.1 200 OK"
2025-05-04 07:42:40,561 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant "HTTP/1.1 200 OK"
2025-05-04 07:42:40,563 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database "HTTP/1.1 200 OK"
2025-05-04 07:42:40,646 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:42:40,646 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:42:40,646 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,646 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,646 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,646 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,646 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,646 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,647 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,647 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,647 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,647 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:42:40,647 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,647 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,647 - utils.state_manager - INFO - get_next_stage: No runs found. Starting with Stage 0.
2025-05-04 07:42:40,647 - utils.state_manager - INFO - get_next_stage: No runs found. Starting with Stage 0.
2025-05-04 07:42:40,648 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:42:40,648 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:42:40,648 - utils.state_manager - INFO - Next stage determined: 0.0
2025-05-04 07:42:40,648 - utils.state_manager - INFO - Next stage determined: 0.0
2025-05-04 07:42:40,648 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,648 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,648 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,648 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,648 - utils.state_manager - INFO - get_last_status: No runs found in status file.
2025-05-04 07:42:40,648 - utils.state_manager - INFO - get_last_status: No runs found in status file.
2025-05-04 07:42:40,648 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:42:40,649 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:42:40,652 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:42:40,652 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:42:40,654 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,657 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,659 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,662 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,664 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,666 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,666 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,666 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:42:40,667 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:42:40,711 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,711 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:42:40,711 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,712 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:42:40,712 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,712 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:42:40,712 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,712 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:42:40,713 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,713 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.txt
2025-05-04 07:42:40,713 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,713 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,713 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,713 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,713 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,713 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,714 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,714 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,714 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,714 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,714 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,714 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,714 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,714 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,714 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,714 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,715 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,715 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,715 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,715 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,715 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,715 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,715 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,715 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.txt']
2025-05-04 07:42:40,715 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:42:40,715 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.txt' (type: document) in ChromaDB for stage 0
2025-05-04 07:42:40,722 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,723 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.txt' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,724 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:42:40,724 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:42:40,724 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,724 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,724 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,724 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,724 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:42:40,724 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:42:40,725 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,725 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,725 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,725 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,726 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,726 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,726 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.724922+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.724582+00:00",
          "artifacts": [
            "dev-docs/stage0_output.txt"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,726 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.724922+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.724582+00:00",
          "artifacts": [
            "dev-docs/stage0_output.txt"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,726 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:42:40,726 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:42:40,769 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,769 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:42:40,769 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,769 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:42:40,770 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,770 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:42:40,770 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,770 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:42:40,771 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,771 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:42:40,771 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,771 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,771 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,771 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,771 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,771 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,772 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,772 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,772 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,772 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,772 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,772 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,772 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,772 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,772 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,772 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,772 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,772 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,772 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,772 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,773 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,773 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,773 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,773 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:42:40,773 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:42:40,773 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:42:40,775 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,776 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,776 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:42:40,776 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:42:40,777 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,777 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,777 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,777 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,777 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:42:40,777 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:42:40,777 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,777 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,778 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,778 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,778 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,778 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,778 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.777322+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.776898+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,778 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.777322+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.776898+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,778 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:42:40,778 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:42:40,779 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:42:40,779 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,779 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:42:40,779 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,779 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:42:40,780 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,780 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,780 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,780 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,780 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,780 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,780 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,780 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,780 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,780 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,780 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,780 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,780 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,780 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,781 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,781 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,781 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,781 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,781 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,781 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,781 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,781 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,781 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,781 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:42:40,781 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:42:40,781 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:42:40,784 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,785 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,785 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:42:40,785 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:42:40,786 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,786 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,786 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,786 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,786 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,786 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,786 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,786 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,787 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,787 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,787 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,787 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,788 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.777322+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.776898+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.785964+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,788 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.777322+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.776898+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.785964+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,788 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:42:40,788 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:42:40,788 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:42:40,788 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,788 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,788 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,788 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,788 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,788 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,788 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,788 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,789 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,789 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,789 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,789 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,789 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,789 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,789 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,789 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,789 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,789 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,789 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,789 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,789 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,789 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,790 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,790 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:42:40,790 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:42:40,790 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 1.0.
2025-05-04 07:42:40,790 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 1.0.
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:42:40,790 - utils.state_manager - INFO - Next stage determined: 2.0
2025-05-04 07:42:40,790 - utils.state_manager - INFO - Next stage determined: 2.0
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,790 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,791 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,791 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,791 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 1.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:42:40.785964+00:00', 'artifacts': ['dev-docs/design/validation_report.json']}
2025-05-04 07:42:40,791 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 1.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:42:40.785964+00:00', 'artifacts': ['dev-docs/design/validation_report.json']}
2025-05-04 07:42:40,791 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:42:40,791 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:42:40,793 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:42:40,793 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:42:40,796 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,798 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,801 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,803 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,805 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,808 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,808 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,808 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:42:40,808 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:42:40,847 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,847 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:42:40,847 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,847 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:42:40,848 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,848 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:42:40,848 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,848 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:42:40,848 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,848 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:42:40,849 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,849 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,849 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,849 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,849 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,849 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,849 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,849 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,849 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,849 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,849 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,849 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,849 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,849 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,849 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,849 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,849 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,849 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,850 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,850 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,850 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,850 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,850 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,850 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:42:40,850 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:42:40,850 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:42:40,852 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,853 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,854 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:42:40,854 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:42:40,854 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,854 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,854 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,854 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,855 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:42:40,855 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:42:40,855 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,855 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,856 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,856 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,856 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,856 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,856 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.855105+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.854536+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,856 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.855105+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.854536+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,856 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:42:40,856 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:42:40,857 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:42:40,857 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,857 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:42:40,857 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,857 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:42:40,858 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,858 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,858 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,858 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,858 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,858 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,859 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,859 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,859 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,859 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,859 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,859 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,859 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,859 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,859 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,859 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,859 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,859 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,859 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,859 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,860 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,860 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,860 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,860 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:42:40,860 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:42:40,860 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:42:40,862 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,863 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,863 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:42:40,863 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:42:40,864 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,864 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,864 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,864 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,864 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,864 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,864 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,864 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,866 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,866 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,866 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,866 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,866 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.855105+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.854536+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.864020+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,866 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.855105+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.854536+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.864020+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,866 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:42:40,866 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:42:40,867 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='2', status='PASS'
2025-05-04 07:42:40,867 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,867 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 2
2025-05-04 07:42:40,867 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,867 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/implementation_plan.md
2025-05-04 07:42:40,868 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/detailed_interfaces.md
2025-05-04 07:42:40,868 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,868 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,868 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,868 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,868 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,868 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,868 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,868 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,868 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,868 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,868 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,868 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,869 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,869 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,869 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,869 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,869 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,869 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,869 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,869 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,869 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,869 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,869 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,869 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']
2025-05-04 07:42:40,869 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:42:40,869 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/implementation_plan.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:42:40,872 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,872 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/implementation_plan.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,873 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/detailed_interfaces.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:42:40,875 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,875 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/detailed_interfaces.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,876 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:42:40,876 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:42:40,876 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,876 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,876 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,876 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,876 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,876 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,876 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,876 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,877 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,877 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,878 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,878 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,878 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.855105+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.854536+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.864020+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.876134+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,878 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.855105+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.854536+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.864020+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.876134+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,878 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:42:40,878 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:42:40,878 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:42:40,878 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,878 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,878 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,878 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,878 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,878 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,878 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,878 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,878 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,878 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,879 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,879 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,879 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,879 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,879 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,880 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,880 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:42:40,880 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:42:40,880 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 2.0.
2025-05-04 07:42:40,880 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 2.0.
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:42:40,880 - utils.state_manager - INFO - Next stage determined: 3.0
2025-05-04 07:42:40,880 - utils.state_manager - INFO - Next stage determined: 3.0
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,880 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,881 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,881 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,881 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 2.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:42:40.876134+00:00', 'artifacts': ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']}
2025-05-04 07:42:40,881 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 2.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:42:40.876134+00:00', 'artifacts': ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']}
2025-05-04 07:42:40,881 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:42:40,881 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:42:40,883 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:42:40,883 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:42:40,885 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,888 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,889 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,892 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,894 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,896 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,896 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,896 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:42:40,896 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:42:40,933 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,933 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:42:40,934 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,934 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:42:40,934 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,934 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:42:40,934 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,934 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:42:40,934 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,935 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:42:40,935 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,935 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,935 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,935 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,935 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,935 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,935 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,935 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,936 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,936 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,936 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,936 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,936 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,936 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,937 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:42:40,937 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:42:40,937 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:42:40,939 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,939 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,940 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:42:40,940 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:42:40,940 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,940 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,940 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,940 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,940 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:42:40,940 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:42:40,941 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,941 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,942 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,942 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,942 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,942 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,942 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.940860+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.940517+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,942 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.940860+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.940517+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,942 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:42:40,942 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:42:40,943 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:42:40,943 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,943 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:42:40,943 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,943 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:42:40,943 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,943 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,944 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,944 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,944 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,944 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,944 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,944 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,944 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,944 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,944 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,944 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,944 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,944 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,944 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,944 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,944 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,944 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,945 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,945 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,945 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,945 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,945 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,945 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:42:40,945 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:42:40,945 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:42:40,947 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,947 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,948 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:42:40,948 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:42:40,948 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,948 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,948 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,948 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,948 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,948 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,949 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,949 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,950 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,950 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,950 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,950 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,950 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.940860+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.940517+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.948651+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,950 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.940860+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.940517+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.948651+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,950 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:42:40,950 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:42:40,951 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='2', status='PASS'
2025-05-04 07:42:40,951 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,951 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 2
2025-05-04 07:42:40,951 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,951 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/implementation_plan.md
2025-05-04 07:42:40,952 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/detailed_interfaces.md
2025-05-04 07:42:40,952 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,952 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,952 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,952 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,952 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,952 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,953 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,953 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,953 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,953 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,953 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,953 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,953 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,954 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,954 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']
2025-05-04 07:42:40,954 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:42:40,954 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/implementation_plan.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:42:40,956 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,956 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/implementation_plan.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,957 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/detailed_interfaces.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:42:40,959 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,959 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/detailed_interfaces.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,960 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:42:40,960 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:42:40,960 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,960 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,960 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,960 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,960 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,960 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,960 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,960 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,962 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,962 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,962 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,962 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,962 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.940860+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.940517+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.948651+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.960245+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,962 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.940860+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.940517+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.948651+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.960245+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,962 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:42:40,962 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:42:40,962 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='3', status='PASS'
2025-05-04 07:42:40,963 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,963 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 3
2025-05-04 07:42:40,963 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:42:40,963 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reports/static_analysis_report.json
2025-05-04 07:42:40,964 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reports/unit_test_report.json
2025-05-04 07:42:40,964 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,964 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,964 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,964 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,964 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,964 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,964 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,964 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,964 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,964 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,965 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,965 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,965 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,965 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,965 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']
2025-05-04 07:42:40,965 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:42:40,966 - chungoidmcp - INFO - Storing artifact 'dev-docs/reports/static_analysis_report.json' (type: report) in ChromaDB for stage 3
2025-05-04 07:42:40,967 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,968 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reports/static_analysis_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,969 - chungoidmcp - INFO - Storing artifact 'dev-docs/reports/unit_test_report.json' (type: report) in ChromaDB for stage 3
2025-05-04 07:42:40,970 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:42:40,971 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reports/unit_test_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:42:40,971 - utils.state_manager - INFO - Attempting to update status for Stage: 3.0, Status: PASS
2025-05-04 07:42:40,971 - utils.state_manager - INFO - Attempting to update status for Stage: 3.0, Status: PASS
2025-05-04 07:42:40,971 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,971 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,971 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,971 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,972 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,972 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:42:40,972 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,972 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,973 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,973 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:42:40,973 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,973 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:42:40,973 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.940860+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.940517+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.948651+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.960245+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        },
        {
          "stage": 3.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.971667+00:00",
          "artifacts": [
            "dev-docs/reports/static_analysis_report.json",
            "dev-docs/reports/unit_test_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,973 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:42:40.940860+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.940517+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.948651+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.960245+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        },
        {
          "stage": 3.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:42:40.971667+00:00",
          "artifacts": [
            "dev-docs/reports/static_analysis_report.json",
            "dev-docs/reports/unit_test_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:42:40,973 - utils.state_manager - INFO - Status update for Stage 3.0 completed successfully.
2025-05-04 07:42:40,973 - utils.state_manager - INFO - Status update for Stage 3.0 completed successfully.
2025-05-04 07:42:40,974 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:42:40,974 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,974 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:40,974 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,974 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:40,974 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,974 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:40,974 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,974 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:40,974 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,974 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:40,974 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,974 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:40,974 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,974 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:40,975 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,975 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:40,975 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:40,975 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:42:40,975 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:42:40,975 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:42:40,975 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 3.0.
2025-05-04 07:42:40,975 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 3.0.
2025-05-04 07:42:40,976 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:42:40,976 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:42:40,976 - utils.state_manager - INFO - Next stage determined: 4.0
2025-05-04 07:42:40,976 - utils.state_manager - INFO - Next stage determined: 4.0
2025-05-04 07:42:40,976 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,976 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:40,976 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,976 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:40,976 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 3.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:42:40.971667+00:00', 'artifacts': ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']}
2025-05-04 07:42:40,976 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 3.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:42:40.971667+00:00', 'artifacts': ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']}
2025-05-04 07:42:40,976 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:42:40,976 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:42:40,979 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:42:40,979 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:42:40,982 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,984 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,986 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,988 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,990 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,993 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,993 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:42:40,993 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:42:40,993 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:42:41,037 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:42:41,037 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:42:41,037 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:42:41,037 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:42:41,038 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:41,038 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:41,038 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:42:41,038 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:41,038 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:42:41,038 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:41,038 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:42:41,038 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:41,038 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:42:41,038 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:41,038 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:42:41,038 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:41,038 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:42:41,039 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:41,039 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:42:41,039 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:41,039 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:41,039 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:41,039 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:42:41,039 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:41,039 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:42:41,039 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:41,039 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:42:41,639 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:42:41,639 - utils.chroma_utils - INFO - Initializing HttpClient with host: partial_host, port: 8000
2025-05-04 07:42:41,639 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:42:41,640 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:42:41,673 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:42:41,673 - utils.chroma_utils - INFO - Initializing HttpClient with host: localhost, port: 8000
2025-05-04 07:42:41,673 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:42:41,673 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:42:41,705 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:42:41,705 - utils.chroma_utils - INFO - Initializing HttpClient with host: env_host, port: 9999
2025-05-04 07:42:41,705 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:42:41,705 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:43:24,196 - root - INFO - File logging configured to chungoid_mcp_server.log
2025-05-04 07:43:24,196 - utils.logger_setup - INFO - Logging setup complete. Level: INFO
2025-05-04 07:43:24,196 - chungoidmcp - INFO - [EARLY CHECK 193235] Logging configured. __name__ = 'chungoidmcp'
2025-05-04 07:43:24,196 - chungoidmcp - INFO - Initializing Chungoid MCP Server components at module level...
2025-05-04 07:43:24,197 - chungoidmcp - INFO - Chungoid base directory determined as: /home/flip/Desktop/chungoid-mcp/chungoid-core
2025-05-04 07:43:24,198 - mcp.server.lowlevel.server - DEBUG - Initializing server 'ChungoidMCP'
2025-05-04 07:43:24,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-05-04 07:43:24,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-05-04 07:43:24,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-05-04 07:43:24,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-05-04 07:43:24,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-05-04 07:43:24,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-05-04 07:43:24,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-05-04 07:43:24,198 - chungoidmcp - INFO - Root logger handlers AFTER FastMCP init: [<StreamHandler <_io.FileIO name=8 mode='rb+' closefd=True> (INFO)>, <RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,198 - chungoidmcp - INFO - FastMCP instance created. StateManager initialization deferred to tool calls.
2025-05-04 07:43:24,208 - chungoidmcp - INFO - --- Inspecting Registered MCP Tools ---
2025-05-04 07:43:24,208 - chungoidmcp - WARNING - Could not access or inspect mcp.tools registry.
2025-05-04 07:43:24,208 - chungoidmcp - INFO - -------------------------------------
2025-05-04 07:43:24,224 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,225 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:43:24,225 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,225 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:43:24,225 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,225 - chungoidmcp - INFO - Getting project status for: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,226 - chungoidmcp - INFO - Successfully retrieved project status from /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,305 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,305 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:43:24,305 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,305 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:43:24,306 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,306 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:43:24,306 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,306 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,306 - utils.state_manager - INFO - Successfully added root RotatingFileHandler to utils.state_manager logger.
2025-05-04 07:43:24,306 - utils.state_manager - INFO - Successfully added root RotatingFileHandler to utils.state_manager logger.
2025-05-04 07:43:24,306 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,306 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,306 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,306 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,307 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,307 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,307 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:43:24,307 - utils.chroma_utils - INFO - Initializing HttpClient with host: localhost, port: 8000
2025-05-04 07:43:24,425 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/auth/identity "HTTP/1.1 200 OK"
2025-05-04 07:43:24,435 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant "HTTP/1.1 200 OK"
2025-05-04 07:43:24,436 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database "HTTP/1.1 200 OK"
2025-05-04 07:43:24,518 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:43:24,518 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:43:24,518 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,518 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,519 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,519 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,519 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,519 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,519 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,519 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,519 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,519 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,519 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,519 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,520 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,520 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,520 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,520 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:43:24,520 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:43:24,520 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,520 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,520 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,520 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,520 - utils.state_manager - INFO - get_next_stage: No runs found. Starting with Stage 0.
2025-05-04 07:43:24,520 - utils.state_manager - INFO - get_next_stage: No runs found. Starting with Stage 0.
2025-05-04 07:43:24,520 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:43:24,520 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:43:24,520 - utils.state_manager - INFO - Next stage determined: 0.0
2025-05-04 07:43:24,520 - utils.state_manager - INFO - Next stage determined: 0.0
2025-05-04 07:43:24,521 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,521 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,521 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,521 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,521 - utils.state_manager - INFO - get_last_status: No runs found in status file.
2025-05-04 07:43:24,521 - utils.state_manager - INFO - get_last_status: No runs found in status file.
2025-05-04 07:43:24,521 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:43:24,521 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:43:24,524 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:43:24,524 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:43:24,527 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,529 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,531 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,533 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,536 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,538 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,538 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,538 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:43:24,539 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:43:24,582 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,582 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:43:24,582 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,582 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:43:24,582 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,583 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:43:24,583 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,583 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:43:24,583 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,583 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.txt
2025-05-04 07:43:24,583 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,583 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,583 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,583 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,583 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,583 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,584 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,584 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,584 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,584 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,584 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,584 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,584 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,584 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,584 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.txt']
2025-05-04 07:43:24,585 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:43:24,585 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.txt' (type: document) in ChromaDB for stage 0
2025-05-04 07:43:24,587 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,588 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.txt' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,590 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:43:24,590 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:43:24,590 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,590 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,590 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,590 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,590 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:43:24,590 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:43:24,590 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,590 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,592 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,592 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,593 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,593 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,593 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.590528+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.590108+00:00",
          "artifacts": [
            "dev-docs/stage0_output.txt"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,593 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.590528+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.590108+00:00",
          "artifacts": [
            "dev-docs/stage0_output.txt"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,593 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:43:24,593 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:43:24,632 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,633 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:43:24,633 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,633 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:43:24,633 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,633 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:43:24,633 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,634 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:43:24,634 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,634 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:43:24,634 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,634 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,634 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,634 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,634 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,634 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,635 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,635 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,635 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,635 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,635 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,635 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,635 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,635 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,635 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,635 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,635 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,635 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,635 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,635 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,636 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,636 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,636 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,636 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:43:24,636 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:43:24,636 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:43:24,638 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,638 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,639 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:43:24,639 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:43:24,639 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,639 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,639 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,639 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,639 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:43:24,639 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:43:24,640 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,640 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,641 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,641 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,641 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,641 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,641 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.639856+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.639465+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,641 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.639856+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.639465+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,642 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:43:24,642 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:43:24,642 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:43:24,642 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,642 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:43:24,642 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,643 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:43:24,643 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,643 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,643 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,643 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,643 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,643 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,643 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,643 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,643 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,643 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,643 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,643 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,644 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,644 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,644 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,644 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,644 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,644 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,644 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,644 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,644 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,644 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,644 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,644 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:43:24,644 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:43:24,645 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:43:24,647 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,647 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,648 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:43:24,648 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:43:24,648 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,648 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,648 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,648 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,648 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,648 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,648 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,648 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,650 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,650 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,650 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,650 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,650 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.639856+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.639465+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.648439+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,650 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.639856+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.639465+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.648439+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,650 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:43:24,650 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:43:24,650 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:43:24,650 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,650 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,651 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,651 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,651 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,651 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,651 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,651 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,651 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,651 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,651 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,651 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,651 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,651 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,651 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,651 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,651 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,651 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,651 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,651 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,652 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,652 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:43:24,652 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:43:24,652 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 1.0.
2025-05-04 07:43:24,652 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 1.0.
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:43:24,652 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:43:24,652 - utils.state_manager - INFO - Next stage determined: 2.0
2025-05-04 07:43:24,652 - utils.state_manager - INFO - Next stage determined: 2.0
2025-05-04 07:43:24,653 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,653 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,653 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,653 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,653 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 1.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:43:24.648439+00:00', 'artifacts': ['dev-docs/design/validation_report.json']}
2025-05-04 07:43:24,653 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 1.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:43:24.648439+00:00', 'artifacts': ['dev-docs/design/validation_report.json']}
2025-05-04 07:43:24,653 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:43:24,653 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:43:24,656 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:43:24,656 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:43:24,659 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,661 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,663 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,665 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,667 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,669 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,669 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,669 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:43:24,669 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:43:24,707 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,707 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:43:24,707 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,707 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:43:24,708 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,708 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:43:24,708 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,708 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:43:24,708 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,708 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,709 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,709 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,709 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,709 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,709 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,709 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,709 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,709 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,709 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,709 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,709 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,710 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,710 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,710 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,710 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:43:24,710 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:43:24,710 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:43:24,712 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,712 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,713 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:43:24,713 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:43:24,713 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,713 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,713 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,713 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,713 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:43:24,713 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:43:24,714 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,714 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,715 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,715 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,715 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,715 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,715 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.713920+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.713409+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,715 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.713920+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.713409+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,715 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:43:24,715 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:43:24,715 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:43:24,715 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,716 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:43:24,716 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,716 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:43:24,716 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,716 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,716 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,716 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,717 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,717 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,717 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,717 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,717 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,717 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,717 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,717 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,717 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,717 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,717 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,717 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,717 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,717 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,718 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,718 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,718 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,718 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,718 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,718 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:43:24,718 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:43:24,718 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:43:24,720 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,721 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,722 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:43:24,722 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:43:24,722 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,722 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,722 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,722 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,722 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,722 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,722 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,722 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,724 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,724 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,725 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,725 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,725 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.713920+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.713409+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.722128+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,725 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.713920+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.713409+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.722128+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,725 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:43:24,725 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:43:24,726 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='2', status='PASS'
2025-05-04 07:43:24,726 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,726 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 2
2025-05-04 07:43:24,726 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,726 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/implementation_plan.md
2025-05-04 07:43:24,727 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/detailed_interfaces.md
2025-05-04 07:43:24,727 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,727 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,727 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,727 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,727 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,727 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,728 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,728 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,728 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,728 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,728 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,728 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,728 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,729 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,729 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']
2025-05-04 07:43:24,729 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:43:24,729 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/implementation_plan.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:43:24,731 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,731 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/implementation_plan.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,732 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/detailed_interfaces.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:43:24,733 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,734 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/detailed_interfaces.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,735 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:43:24,735 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:43:24,735 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,735 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,735 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,735 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,735 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,735 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,735 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,735 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,737 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,737 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,737 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,737 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,737 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.713920+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.713409+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.722128+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.735250+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,737 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.713920+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.713409+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.722128+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.735250+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,737 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:43:24,737 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:43:24,737 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:43:24,737 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,737 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,737 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,737 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,738 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,738 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,738 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,738 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,738 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,738 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,738 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,738 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,738 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,738 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,738 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,738 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,738 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,738 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,738 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,738 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,739 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,739 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:43:24,739 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:43:24,739 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 2.0.
2025-05-04 07:43:24,739 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 2.0.
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:43:24,739 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:43:24,740 - utils.state_manager - INFO - Next stage determined: 3.0
2025-05-04 07:43:24,740 - utils.state_manager - INFO - Next stage determined: 3.0
2025-05-04 07:43:24,740 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,740 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,740 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,740 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,740 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 2.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:43:24.735250+00:00', 'artifacts': ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']}
2025-05-04 07:43:24,740 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 2.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:43:24.735250+00:00', 'artifacts': ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']}
2025-05-04 07:43:24,740 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:43:24,740 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:43:24,743 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:43:24,743 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:43:24,745 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,747 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,749 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,752 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,754 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,756 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,756 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,756 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:43:24,756 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:43:24,800 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,800 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:43:24,800 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,800 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:43:24,801 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,801 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:43:24,801 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,801 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:43:24,801 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,801 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:43:24,802 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,802 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,802 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,802 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,802 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,802 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,802 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,802 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,802 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,802 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,802 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,802 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,803 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,803 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,803 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,803 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,803 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,803 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,803 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,803 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,803 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,803 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,803 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,803 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:43:24,803 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:43:24,803 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:43:24,805 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,806 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,806 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:43:24,806 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:43:24,807 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,807 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,807 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,807 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,807 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:43:24,807 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:43:24,807 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,807 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,808 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,808 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,808 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,808 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,808 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.807297+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.806874+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,808 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.807297+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.806874+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,809 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:43:24,809 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:43:24,809 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:43:24,809 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,809 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:43:24,809 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,809 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:43:24,810 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,810 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,810 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,810 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,810 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,810 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,810 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,810 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,810 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,810 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,810 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,810 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,810 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,810 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,810 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,810 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,811 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,811 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,811 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,811 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,811 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,811 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,811 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,811 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:43:24,811 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:43:24,811 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:43:24,813 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,814 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,814 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:43:24,814 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:43:24,814 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,814 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,815 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,815 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,815 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,815 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,815 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,815 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,816 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,816 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,816 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,816 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,817 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.807297+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.806874+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.814751+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,817 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.807297+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.806874+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.814751+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,817 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:43:24,817 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:43:24,817 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='2', status='PASS'
2025-05-04 07:43:24,818 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,818 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 2
2025-05-04 07:43:24,818 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,818 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/implementation_plan.md
2025-05-04 07:43:24,818 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/detailed_interfaces.md
2025-05-04 07:43:24,819 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,819 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,819 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,819 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,819 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,819 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,819 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,819 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,819 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,819 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,819 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,819 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,819 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,819 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,820 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,820 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,820 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,820 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,820 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,820 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,820 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,820 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,820 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,820 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']
2025-05-04 07:43:24,820 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:43:24,820 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/implementation_plan.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:43:24,823 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,824 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/implementation_plan.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,825 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/detailed_interfaces.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:43:24,827 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,828 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/detailed_interfaces.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,828 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:43:24,828 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:43:24,829 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,829 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,829 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,829 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,829 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,829 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,829 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,829 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,831 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,831 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,831 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,831 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,831 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.807297+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.806874+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.814751+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.829095+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,831 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.807297+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.806874+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.814751+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.829095+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,831 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:43:24,831 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:43:24,832 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='3', status='PASS'
2025-05-04 07:43:24,832 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,832 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 3
2025-05-04 07:43:24,832 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:43:24,833 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reports/static_analysis_report.json
2025-05-04 07:43:24,833 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reports/unit_test_report.json
2025-05-04 07:43:24,834 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,834 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,834 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,834 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,834 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,834 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,834 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,834 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,834 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,834 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,834 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,834 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,835 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,835 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,835 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,835 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,835 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,835 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,835 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,835 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,835 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,835 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,835 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,835 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']
2025-05-04 07:43:24,835 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:43:24,835 - chungoidmcp - INFO - Storing artifact 'dev-docs/reports/static_analysis_report.json' (type: report) in ChromaDB for stage 3
2025-05-04 07:43:24,837 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,838 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reports/static_analysis_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,839 - chungoidmcp - INFO - Storing artifact 'dev-docs/reports/unit_test_report.json' (type: report) in ChromaDB for stage 3
2025-05-04 07:43:24,840 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:43:24,841 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reports/unit_test_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:43:24,841 - utils.state_manager - INFO - Attempting to update status for Stage: 3.0, Status: PASS
2025-05-04 07:43:24,841 - utils.state_manager - INFO - Attempting to update status for Stage: 3.0, Status: PASS
2025-05-04 07:43:24,842 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,842 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,842 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,842 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,842 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,842 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:43:24,842 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,842 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,843 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,843 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:43:24,843 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,843 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:43:24,843 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.807297+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.806874+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.814751+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.829095+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        },
        {
          "stage": 3.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.841897+00:00",
          "artifacts": [
            "dev-docs/reports/static_analysis_report.json",
            "dev-docs/reports/unit_test_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,843 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:43:24.807297+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.806874+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.814751+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.829095+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        },
        {
          "stage": 3.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:43:24.841897+00:00",
          "artifacts": [
            "dev-docs/reports/static_analysis_report.json",
            "dev-docs/reports/unit_test_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:43:24,843 - utils.state_manager - INFO - Status update for Stage 3.0 completed successfully.
2025-05-04 07:43:24,843 - utils.state_manager - INFO - Status update for Stage 3.0 completed successfully.
2025-05-04 07:43:24,844 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:43:24,844 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,844 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,844 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,844 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,844 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,844 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,844 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,844 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,844 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,844 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,844 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,844 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,845 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,845 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,845 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,845 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:43:24,845 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:43:24,845 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:43:24,846 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 3.0.
2025-05-04 07:43:24,846 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 3.0.
2025-05-04 07:43:24,846 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:43:24,846 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:43:24,846 - utils.state_manager - INFO - Next stage determined: 4.0
2025-05-04 07:43:24,846 - utils.state_manager - INFO - Next stage determined: 4.0
2025-05-04 07:43:24,846 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,846 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,846 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,846 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,846 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 3.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:43:24.841897+00:00', 'artifacts': ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']}
2025-05-04 07:43:24,846 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 3.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:43:24.841897+00:00', 'artifacts': ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']}
2025-05-04 07:43:24,846 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:43:24,847 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:43:24,849 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:43:24,849 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:43:24,852 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,854 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,856 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,858 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,860 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,863 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,863 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:43:24,863 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:43:24,863 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:43:24,906 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:43:24,906 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:43:24,906 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:43:24,906 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:43:24,907 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,907 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,907 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:43:24,907 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,907 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:43:24,907 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,907 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:43:24,907 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,907 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:43:24,907 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,907 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:43:24,907 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,907 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:43:24,907 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,907 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:43:24,907 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,907 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,908 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,908 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:43:24,908 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,908 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:43:24,908 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:24,908 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:43:25,556 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:43:25,557 - utils.chroma_utils - INFO - Initializing HttpClient with host: partial_host, port: 8000
2025-05-04 07:43:25,557 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:43:25,557 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:43:25,597 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:43:25,597 - utils.chroma_utils - INFO - Initializing HttpClient with host: localhost, port: 8000
2025-05-04 07:43:25,597 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:43:25,597 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:43:25,631 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:43:25,631 - utils.chroma_utils - INFO - Initializing HttpClient with host: env_host, port: 9999
2025-05-04 07:43:25,631 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:43:25,632 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:45:25,437 - root - INFO - File logging configured to chungoid_mcp_server.log
2025-05-04 07:45:25,437 - utils.logger_setup - INFO - Logging setup complete. Level: INFO
2025-05-04 07:45:25,437 - chungoidmcp - INFO - [EARLY CHECK 193676] Logging configured. __name__ = 'chungoidmcp'
2025-05-04 07:45:25,438 - chungoidmcp - INFO - Initializing Chungoid MCP Server components at module level...
2025-05-04 07:45:25,438 - chungoidmcp - INFO - Chungoid base directory determined as: /home/flip/Desktop/chungoid-mcp/chungoid-core
2025-05-04 07:45:25,439 - mcp.server.lowlevel.server - DEBUG - Initializing server 'ChungoidMCP'
2025-05-04 07:45:25,439 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-05-04 07:45:25,439 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-05-04 07:45:25,439 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-05-04 07:45:25,439 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-05-04 07:45:25,439 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-05-04 07:45:25,439 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-05-04 07:45:25,439 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-05-04 07:45:25,440 - chungoidmcp - INFO - Root logger handlers AFTER FastMCP init: [<StreamHandler <_io.FileIO name=8 mode='rb+' closefd=True> (INFO)>, <RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:25,440 - chungoidmcp - INFO - FastMCP instance created. StateManager initialization deferred to tool calls.
2025-05-04 07:45:25,451 - chungoidmcp - INFO - --- Inspecting Registered MCP Tools ---
2025-05-04 07:45:25,451 - chungoidmcp - WARNING - Could not access or inspect mcp.tools registry.
2025-05-04 07:45:25,451 - chungoidmcp - INFO - -------------------------------------
2025-05-04 07:45:50,356 - root - INFO - File logging configured to chungoid_mcp_server.log
2025-05-04 07:45:50,356 - utils.logger_setup - INFO - Logging setup complete. Level: INFO
2025-05-04 07:45:50,356 - chungoidmcp - INFO - [EARLY CHECK 193734] Logging configured. __name__ = 'chungoidmcp'
2025-05-04 07:45:50,356 - chungoidmcp - INFO - Initializing Chungoid MCP Server components at module level...
2025-05-04 07:45:50,356 - chungoidmcp - INFO - Chungoid base directory determined as: /home/flip/Desktop/chungoid-mcp/chungoid-core
2025-05-04 07:45:50,357 - mcp.server.lowlevel.server - DEBUG - Initializing server 'ChungoidMCP'
2025-05-04 07:45:50,357 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-05-04 07:45:50,357 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-05-04 07:45:50,358 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-05-04 07:45:50,358 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-05-04 07:45:50,358 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-05-04 07:45:50,358 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-05-04 07:45:50,358 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-05-04 07:45:50,358 - chungoidmcp - INFO - Root logger handlers AFTER FastMCP init: [<StreamHandler <_io.FileIO name=8 mode='rb+' closefd=True> (INFO)>, <RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,358 - chungoidmcp - INFO - FastMCP instance created. StateManager initialization deferred to tool calls.
2025-05-04 07:45:50,367 - chungoidmcp - INFO - --- Inspecting Registered MCP Tools ---
2025-05-04 07:45:50,367 - chungoidmcp - WARNING - Could not access or inspect mcp.tools registry.
2025-05-04 07:45:50,368 - chungoidmcp - INFO - -------------------------------------
2025-05-04 07:45:50,377 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,377 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:50,378 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,378 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:50,378 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,378 - chungoidmcp - INFO - Getting project status for: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,378 - chungoidmcp - INFO - Successfully retrieved project status from /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,461 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,461 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:50,462 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,462 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:50,462 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,462 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:45:50,463 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,463 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,463 - utils.state_manager - INFO - Successfully added root RotatingFileHandler to utils.state_manager logger.
2025-05-04 07:45:50,463 - utils.state_manager - INFO - Successfully added root RotatingFileHandler to utils.state_manager logger.
2025-05-04 07:45:50,463 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,463 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,463 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,463 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,463 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,463 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,463 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:45:50,463 - utils.chroma_utils - INFO - Initializing HttpClient with host: localhost, port: 8000
2025-05-04 07:45:50,581 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/auth/identity "HTTP/1.1 200 OK"
2025-05-04 07:45:50,589 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant "HTTP/1.1 200 OK"
2025-05-04 07:45:50,591 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database "HTTP/1.1 200 OK"
2025-05-04 07:45:50,675 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:45:50,676 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:45:50,676 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,676 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,676 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,676 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,677 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,677 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,677 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,677 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:45:50,677 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,677 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,678 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,678 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,678 - utils.state_manager - INFO - get_next_stage: No runs found. Starting with Stage 0.
2025-05-04 07:45:50,678 - utils.state_manager - INFO - get_next_stage: No runs found. Starting with Stage 0.
2025-05-04 07:45:50,678 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:45:50,678 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:45:50,678 - utils.state_manager - INFO - Next stage determined: 0.0
2025-05-04 07:45:50,678 - utils.state_manager - INFO - Next stage determined: 0.0
2025-05-04 07:45:50,678 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,678 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,679 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,679 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,679 - utils.state_manager - INFO - get_last_status: No runs found in status file.
2025-05-04 07:45:50,679 - utils.state_manager - INFO - get_last_status: No runs found in status file.
2025-05-04 07:45:50,679 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:45:50,679 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:45:50,682 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:45:50,683 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:45:50,685 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,687 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,689 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,692 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,694 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,696 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,697 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,697 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:45:50,697 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:45:50,739 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,739 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:50,740 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,740 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:50,740 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,740 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:45:50,740 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,740 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:45:50,740 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,741 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.txt
2025-05-04 07:45:50,741 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,741 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,741 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,741 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,741 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,741 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,741 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,741 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,741 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,741 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,742 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,742 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,742 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,742 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,743 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.txt']
2025-05-04 07:45:50,743 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:45:50,743 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.txt' (type: document) in ChromaDB for stage 0
2025-05-04 07:45:50,746 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,747 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.txt' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,748 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:45:50,748 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:45:50,748 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,748 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,749 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,749 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,749 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:50,749 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:50,749 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,749 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,750 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,750 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,750 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,750 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,751 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.749234+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.748856+00:00",
          "artifacts": [
            "dev-docs/stage0_output.txt"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,751 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.749234+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.748856+00:00",
          "artifacts": [
            "dev-docs/stage0_output.txt"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,751 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:45:50,751 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:45:50,788 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,788 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:50,788 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,788 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:50,789 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,789 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:45:50,789 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,789 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:45:50,789 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,789 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:45:50,790 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,790 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,790 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,790 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,790 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,790 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,790 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,790 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,790 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,790 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,790 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,790 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,791 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,791 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,791 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,791 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,791 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,791 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,791 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,791 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,791 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,791 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,791 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,791 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:45:50,791 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:45:50,791 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:45:50,794 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,794 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,795 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:45:50,795 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:45:50,795 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,795 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,796 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,796 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,796 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:50,796 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:50,796 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,796 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,797 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,797 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,798 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,798 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,798 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.796240+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.795765+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,798 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.796240+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.795765+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,798 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:45:50,798 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:45:50,798 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:45:50,798 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,798 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:45:50,798 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,799 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:45:50,799 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,799 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,799 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,799 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,799 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,799 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,799 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,799 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,800 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,800 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,800 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,800 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,800 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,800 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,800 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:45:50,800 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:45:50,801 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:45:50,803 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,803 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,804 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:45:50,804 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:45:50,804 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,804 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,804 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,804 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,804 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,804 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,804 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,804 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,806 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,806 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,806 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,806 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,806 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.796240+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.795765+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.804250+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,806 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.796240+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.795765+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.804250+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,806 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:45:50,806 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:45:50,806 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:45:50,806 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,806 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,806 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,806 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,806 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,806 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,807 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,807 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,807 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,807 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,807 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,807 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,807 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,807 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,807 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,808 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,808 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:45:50,808 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:45:50,808 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 1.0.
2025-05-04 07:45:50,808 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 1.0.
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:45:50,808 - utils.state_manager - INFO - Next stage determined: 2.0
2025-05-04 07:45:50,808 - utils.state_manager - INFO - Next stage determined: 2.0
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,808 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,809 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,809 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,809 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 1.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:45:50.804250+00:00', 'artifacts': ['dev-docs/design/validation_report.json']}
2025-05-04 07:45:50,809 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 1.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:45:50.804250+00:00', 'artifacts': ['dev-docs/design/validation_report.json']}
2025-05-04 07:45:50,809 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:45:50,809 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:45:50,811 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:45:50,811 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:45:50,814 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,816 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,818 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,820 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,822 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,824 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,824 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,825 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:45:50,825 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:45:50,864 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,864 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:50,864 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,865 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:50,865 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,865 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:45:50,865 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,865 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:45:50,866 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,866 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:45:50,866 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,866 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,866 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,866 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,866 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,866 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,867 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,867 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,867 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,867 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,867 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,867 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,867 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,867 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,868 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:45:50,868 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:45:50,868 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:45:50,870 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,870 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,871 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:45:50,871 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:45:50,871 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,871 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,871 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,871 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,871 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:50,871 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:50,871 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,871 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,873 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,873 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,873 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,873 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,873 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.871771+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.871428+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,873 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.871771+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.871428+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,873 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:45:50,873 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:45:50,873 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:45:50,873 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,874 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:45:50,874 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,874 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:45:50,874 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,874 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,874 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,874 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,874 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,874 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,874 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,874 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,875 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,875 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,875 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,875 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,875 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,875 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,875 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:45:50,875 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:45:50,876 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:45:50,878 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,879 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,879 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:45:50,879 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:45:50,880 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,880 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,880 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,880 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,880 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,880 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,880 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,880 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,881 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,881 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,882 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,882 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,882 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.871771+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.871428+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.879927+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,882 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.871771+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.871428+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.879927+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,882 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:45:50,882 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:45:50,882 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='2', status='PASS'
2025-05-04 07:45:50,882 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,883 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 2
2025-05-04 07:45:50,883 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,883 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/implementation_plan.md
2025-05-04 07:45:50,883 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/detailed_interfaces.md
2025-05-04 07:45:50,884 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,884 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,884 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,884 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,884 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,884 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,884 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,884 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,884 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,884 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,884 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,884 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,884 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,884 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,884 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,884 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,884 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,884 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,885 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,885 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,885 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,885 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,885 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,885 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']
2025-05-04 07:45:50,885 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:45:50,885 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/implementation_plan.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:45:50,887 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,888 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/implementation_plan.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,888 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/detailed_interfaces.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:45:50,890 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,890 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/detailed_interfaces.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,891 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:45:50,891 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:45:50,891 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,891 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,891 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,891 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,891 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,891 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,891 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,891 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,893 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,893 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,893 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,893 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,893 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.871771+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.871428+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.879927+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.891398+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,893 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.871771+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.871428+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.879927+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.891398+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,893 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:45:50,893 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:45:50,893 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:45:50,893 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,894 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,894 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,894 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,894 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,894 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,894 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,894 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,894 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,894 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,894 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,894 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,894 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,894 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,894 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,894 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,894 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,894 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,895 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,895 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:45:50,895 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:45:50,895 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:45:50,895 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 2.0.
2025-05-04 07:45:50,895 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 2.0.
2025-05-04 07:45:50,896 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:45:50,896 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:45:50,896 - utils.state_manager - INFO - Next stage determined: 3.0
2025-05-04 07:45:50,896 - utils.state_manager - INFO - Next stage determined: 3.0
2025-05-04 07:45:50,896 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,896 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,896 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,896 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,896 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 2.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:45:50.891398+00:00', 'artifacts': ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']}
2025-05-04 07:45:50,896 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 2.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:45:50.891398+00:00', 'artifacts': ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']}
2025-05-04 07:45:50,896 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:45:50,896 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:45:50,899 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:45:50,899 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:45:50,901 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,903 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,906 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,908 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,910 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,913 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,913 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,913 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:45:50,913 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:45:50,952 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,952 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:50,952 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,952 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:50,952 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,953 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:45:50,953 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,953 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:45:50,953 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,953 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:45:50,953 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,953 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,953 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,953 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,954 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,954 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,954 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,954 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,954 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,954 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,954 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,954 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,954 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,954 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,954 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:45:50,954 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:45:50,955 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:45:50,957 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,957 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,958 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:45:50,958 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:45:50,958 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,958 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,958 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,958 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,958 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:50,958 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:50,958 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,958 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,959 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,959 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,960 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,960 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,960 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.958615+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.958255+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,960 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.958615+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.958255+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,960 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:45:50,960 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:45:50,960 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:45:50,960 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,960 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:45:50,960 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,961 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:45:50,961 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,961 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,961 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,961 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,961 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,961 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,961 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,961 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,961 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,961 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,961 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,961 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,961 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,961 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,961 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,961 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,962 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,962 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,962 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,962 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,962 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,962 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,962 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,962 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:45:50,962 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:45:50,962 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:45:50,964 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,965 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,966 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:45:50,966 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:45:50,966 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,966 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,966 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,966 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,966 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,966 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,966 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,966 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,967 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,967 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,968 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,968 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,968 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.958615+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.958255+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.966318+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,968 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.958615+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.958255+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.966318+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,968 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:45:50,968 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:45:50,968 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='2', status='PASS'
2025-05-04 07:45:50,968 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,968 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 2
2025-05-04 07:45:50,968 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,969 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/implementation_plan.md
2025-05-04 07:45:50,969 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/detailed_interfaces.md
2025-05-04 07:45:50,969 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,969 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,969 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,969 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,969 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,969 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,969 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,969 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,970 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,970 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,970 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,970 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,970 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,970 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,970 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']
2025-05-04 07:45:50,970 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:45:50,971 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/implementation_plan.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:45:50,972 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,973 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/implementation_plan.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,974 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/detailed_interfaces.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:45:50,975 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,975 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/detailed_interfaces.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,976 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:45:50,976 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:45:50,976 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,976 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,976 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,976 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,976 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,976 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,976 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,976 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,978 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,978 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,978 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,978 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,978 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.958615+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.958255+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.966318+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.976396+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,978 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.958615+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.958255+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.966318+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.976396+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,978 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:45:50,978 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:45:50,978 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='3', status='PASS'
2025-05-04 07:45:50,979 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,979 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 3
2025-05-04 07:45:50,979 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:50,979 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reports/static_analysis_report.json
2025-05-04 07:45:50,979 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reports/unit_test_report.json
2025-05-04 07:45:50,980 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,980 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,980 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,980 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,980 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,980 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,980 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,980 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,980 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,980 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,980 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,980 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,980 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,980 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,980 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,980 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,981 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,981 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,981 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,981 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,981 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,981 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,981 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,981 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']
2025-05-04 07:45:50,981 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:45:50,981 - chungoidmcp - INFO - Storing artifact 'dev-docs/reports/static_analysis_report.json' (type: report) in ChromaDB for stage 3
2025-05-04 07:45:50,983 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,984 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reports/static_analysis_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,985 - chungoidmcp - INFO - Storing artifact 'dev-docs/reports/unit_test_report.json' (type: report) in ChromaDB for stage 3
2025-05-04 07:45:50,987 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:50,987 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reports/unit_test_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:50,987 - utils.state_manager - INFO - Attempting to update status for Stage: 3.0, Status: PASS
2025-05-04 07:45:50,987 - utils.state_manager - INFO - Attempting to update status for Stage: 3.0, Status: PASS
2025-05-04 07:45:50,988 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,988 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,988 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,988 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,988 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,988 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:45:50,988 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,988 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,989 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,989 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:50,990 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,990 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:50,990 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.958615+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.958255+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.966318+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.976396+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        },
        {
          "stage": 3.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.987985+00:00",
          "artifacts": [
            "dev-docs/reports/static_analysis_report.json",
            "dev-docs/reports/unit_test_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,990 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:50.958615+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.958255+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.966318+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.976396+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        },
        {
          "stage": 3.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:50.987985+00:00",
          "artifacts": [
            "dev-docs/reports/static_analysis_report.json",
            "dev-docs/reports/unit_test_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Status update for Stage 3.0 completed successfully.
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Status update for Stage 3.0 completed successfully.
2025-05-04 07:45:50,990 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:45:50,990 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,990 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:50,990 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,990 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,990 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:50,991 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,991 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:50,991 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:50,991 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:45:50,991 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,991 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:45:50,992 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 3.0.
2025-05-04 07:45:50,992 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 3.0.
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:45:50,992 - utils.state_manager - INFO - Next stage determined: 4.0
2025-05-04 07:45:50,992 - utils.state_manager - INFO - Next stage determined: 4.0
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 3.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:45:50.987985+00:00', 'artifacts': ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']}
2025-05-04 07:45:50,992 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 3.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:45:50.987985+00:00', 'artifacts': ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']}
2025-05-04 07:45:50,993 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:45:50,993 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:45:50,995 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:45:50,995 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:45:50,997 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:50,999 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:51,001 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:51,004 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:51,006 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:51,009 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:51,009 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:45:51,009 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:45:51,009 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:45:51,051 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,052 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:51,052 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,052 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:51,052 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,052 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,052 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,053 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,053 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,053 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,053 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,053 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,053 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,053 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,053 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,053 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,053 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,053 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,053 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,053 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,053 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,053 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,053 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,054 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:51,054 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:51,054 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,054 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,103 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,103 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:51,103 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,103 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:51,103 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,104 - chungoidmcp - INFO - Received 'load_reflections' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') with args: None
2025-05-04 07:45:51,104 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,104 - chungoidmcp - INFO - Loading reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,104 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,104 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,104 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,104 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,104 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,104 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,104 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,104 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,104 - utils.state_manager - ERROR - Synchronous ChromaDB client initialization returned None.
2025-05-04 07:45:51,104 - utils.state_manager - ERROR - Synchronous ChromaDB client initialization returned None.
2025-05-04 07:45:51,104 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,104 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,105 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,105 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,105 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,105 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,105 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,105 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,105 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:51,105 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:51,105 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,105 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,105 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,105 - chungoidmcp - INFO - Calling get_all_reflections with limit=20
2025-05-04 07:45:51,105 - utils.state_manager - ERROR - ChromaDB client was not initialized successfully. Cannot perform DB operations.
2025-05-04 07:45:51,105 - utils.state_manager - ERROR - ChromaDB client was not initialized successfully. Cannot perform DB operations.
2025-05-04 07:45:51,105 - chungoidmcp - ERROR - Error retrieving reflections via ChromaDB for target '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': ChromaDB client is not available.
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1149, in handle_load_reflections
    reflections_data = context_state_manager.get_all_reflections(limit=limit_to_load)
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 816, in get_all_reflections
    raise ChromaOperationError("ChromaDB client is not available.")
utils.state_manager.ChromaOperationError: ChromaDB client is not available.
2025-05-04 07:45:51,108 - chungoidmcp - INFO - Received 'load_reflections' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') with args: None
2025-05-04 07:45:51,108 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,108 - chungoidmcp - INFO - Loading reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,108 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,108 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,108 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,108 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,109 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,109 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,109 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,109 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,109 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,109 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,109 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,109 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,109 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,109 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,109 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,109 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,109 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,109 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,110 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:51,110 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:51,110 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,110 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,110 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,110 - chungoidmcp - INFO - Calling get_all_reflections with limit=20
2025-05-04 07:45:51,112 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:51,112 - utils.state_manager - DEBUG - Getting all reflections from 'chungoid_reflections' (limit: 20)
2025-05-04 07:45:51,112 - utils.state_manager - DEBUG - Getting all reflections from 'chungoid_reflections' (limit: 20)
2025-05-04 07:45:51,116 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/c4edeff1-3708-4487-9486-5ffc441f4632/get "HTTP/1.1 200 OK"
2025-05-04 07:45:51,116 - utils.state_manager - INFO - Retrieved 0 reflections from collection 'chungoid_reflections' (limit: 20).
2025-05-04 07:45:51,116 - utils.state_manager - INFO - Retrieved 0 reflections from collection 'chungoid_reflections' (limit: 20).
2025-05-04 07:45:51,117 - chungoidmcp - INFO - No reflections found via StateManager (get_all_reflections, limit: 20).
2025-05-04 07:45:51,185 - chungoidmcp - INFO - Received 'load_reflections' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') with args: None
2025-05-04 07:45:51,185 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,185 - chungoidmcp - INFO - Loading reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,185 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,185 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,185 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,185 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,185 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,185 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,186 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,186 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,186 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,186 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,186 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,186 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,186 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,186 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,186 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,186 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,186 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,186 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,186 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:51,186 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:51,186 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,186 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,186 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,186 - chungoidmcp - INFO - Calling get_all_reflections with limit=20
2025-05-04 07:45:51,189 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:51,189 - utils.state_manager - DEBUG - Getting all reflections from 'chungoid_reflections' (limit: 20)
2025-05-04 07:45:51,189 - utils.state_manager - DEBUG - Getting all reflections from 'chungoid_reflections' (limit: 20)
2025-05-04 07:45:51,192 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/c4edeff1-3708-4487-9486-5ffc441f4632/get "HTTP/1.1 200 OK"
2025-05-04 07:45:51,192 - utils.state_manager - INFO - Retrieved 0 reflections from collection 'chungoid_reflections' (limit: 20).
2025-05-04 07:45:51,192 - utils.state_manager - INFO - Retrieved 0 reflections from collection 'chungoid_reflections' (limit: 20).
2025-05-04 07:45:51,193 - chungoidmcp - INFO - No reflections found via StateManager (get_all_reflections, limit: 20).
2025-05-04 07:45:51,264 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,264 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:51,264 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,264 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:51,265 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,265 - chungoidmcp - INFO - Received 'retrieve_reflections' request for query: 'test query' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:45:51,265 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,265 - chungoidmcp - INFO - Retrieving reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,265 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,265 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,265 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,265 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,265 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,265 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,265 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,265 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,265 - utils.state_manager - ERROR - Synchronous ChromaDB client initialization returned None.
2025-05-04 07:45:51,265 - utils.state_manager - ERROR - Synchronous ChromaDB client initialization returned None.
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,266 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,266 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,266 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,266 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,266 - utils.state_manager - ERROR - ChromaDB client was not initialized successfully. Cannot perform DB operations.
2025-05-04 07:45:51,266 - utils.state_manager - ERROR - ChromaDB client was not initialized successfully. Cannot perform DB operations.
2025-05-04 07:45:51,266 - chungoidmcp - ERROR - Error retrieving reflections via ChromaDB for target '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': ChromaDB client is not available.
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1313, in handle_retrieve_reflections_tool
    results = context_state_manager.get_reflection_context_from_chroma(
        query=query,
        n_results=n_results,
        filter_stage_min=stage_filter_float, # Pass converted float
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 707, in get_reflection_context_from_chroma
    raise ChromaOperationError("ChromaDB client is not available.")
utils.state_manager.ChromaOperationError: ChromaDB client is not available.
2025-05-04 07:45:51,314 - chungoidmcp - INFO - Received 'retrieve_reflections' request for query: 'test query' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:45:51,314 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,314 - chungoidmcp - INFO - Retrieving reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,314 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,314 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,314 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,314 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,314 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,314 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,314 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,314 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,315 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,315 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,315 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,315 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,315 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,315 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,315 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,315 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,315 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,315 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,315 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:51,315 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:51,315 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,315 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,315 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,318 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:51,318 - utils.state_manager - DEBUG - Querying Chroma collection 'chungoid_reflections' for reflections: 'test query...' (n=3, filter=None)
2025-05-04 07:45:51,318 - utils.state_manager - DEBUG - Querying Chroma collection 'chungoid_reflections' for reflections: 'test query...' (n=3, filter=None)
2025-05-04 07:45:51,760 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/c4edeff1-3708-4487-9486-5ffc441f4632/query "HTTP/1.1 200 OK"
2025-05-04 07:45:51,761 - utils.state_manager - INFO - Retrieved 0 reflection context results from Chroma for query 'test query...'
2025-05-04 07:45:51,761 - utils.state_manager - INFO - Retrieved 0 reflection context results from Chroma for query 'test query...'
2025-05-04 07:45:51,761 - chungoidmcp - INFO - Successfully retrieved 0 reflections using ChromaDB query.
2025-05-04 07:45:51,826 - chungoidmcp - INFO - Received 'retrieve_reflections' request for query: 'another query' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:45:51,827 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,827 - chungoidmcp - INFO - Retrieving reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:51,827 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,827 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:51,827 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,827 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:51,827 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,827 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:51,827 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,827 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:51,827 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,827 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:51,827 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,827 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:51,828 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,828 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:51,828 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,828 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,828 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,828 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:51,828 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:51,828 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:51,828 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,828 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:51,828 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:51,831 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:51,832 - utils.state_manager - DEBUG - Querying Chroma collection 'chungoid_reflections' for reflections: 'another query...' (n=1, filter={'stage_number': {'$gte': 0.0}})
2025-05-04 07:45:51,832 - utils.state_manager - DEBUG - Querying Chroma collection 'chungoid_reflections' for reflections: 'another query...' (n=1, filter={'stage_number': {'$gte': 0.0}})
2025-05-04 07:45:52,133 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/c4edeff1-3708-4487-9486-5ffc441f4632/query "HTTP/1.1 200 OK"
2025-05-04 07:45:52,133 - utils.state_manager - INFO - Retrieved 0 reflection context results from Chroma for query 'another query...'
2025-05-04 07:45:52,133 - utils.state_manager - INFO - Retrieved 0 reflection context results from Chroma for query 'another query...'
2025-05-04 07:45:52,134 - chungoidmcp - INFO - Successfully retrieved 0 reflections using ChromaDB query.
2025-05-04 07:45:52,199 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:45:52,199 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:52,199 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:45:52,199 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:45:52,199 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reflections.md
2025-05-04 07:45:52,200 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,200 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,200 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,200 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,200 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,200 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,200 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,200 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,200 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,200 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,200 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:52,200 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:45:52,200 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:52,200 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:45:52,201 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,201 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,201 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,201 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,201 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:52,201 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:52,201 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:52,201 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:45:52,201 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:52,201 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/reflections.md']
2025-05-04 07:45:52,201 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:45:52,201 - chungoidmcp - INFO - Storing artifact 'dev-docs/reflections.md' (type: reflection_doc) in ChromaDB for stage 1
2025-05-04 07:45:52,204 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:45:52,204 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reflections.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:45:52,205 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:45:52,205 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:45:52,205 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,205 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,205 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:52,205 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:45:52,205 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:52,205 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:45:52,205 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,205 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,207 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:52,207 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:45:52,207 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:52,207 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:45:52,207 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:52.205798+00:00",
      "status_updates": [
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:52.205472+00:00",
          "artifacts": [
            "dev-docs/reflections.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:52,207 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:45:52.205798+00:00",
      "status_updates": [
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:45:52.205472+00:00",
          "artifacts": [
            "dev-docs/reflections.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:45:52,207 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:45:52,207 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:45:52,272 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:45:52,272 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:45:52,272 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:45:52,273 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:45:52,273 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:45:52,318 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:45:52,319 - utils.chroma_utils - INFO - Initializing HttpClient with host: bad_host, port: 1111
2025-05-04 07:45:52,319 - utils.chroma_utils - ERROR - Failed to initialize ChromaDB client: Connection refused
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/chroma_utils.py", line 76, in get_chroma_client
    _client = chromadb.HttpClient(host=host, port=port)
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
Exception: Connection refused
2025-05-04 07:45:52,319 - utils.chroma_utils - WARNING - Returning None for ChromaDB client.
2025-05-04 07:45:52,321 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:45:52,321 - utils.chroma_utils - INFO - Initializing HttpClient with host: partial_host, port: 8000
2025-05-04 07:45:52,321 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:45:52,321 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:45:52,323 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:45:52,323 - utils.chroma_utils - INFO - Initializing HttpClient with host: localhost, port: 8000
2025-05-04 07:45:52,323 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:45:52,323 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:45:52,325 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:45:52,325 - utils.chroma_utils - INFO - Initializing HttpClient with host: env_host, port: 9999
2025-05-04 07:45:52,325 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:45:52,325 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:45:52,407 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,407 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,407 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,407 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,407 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,407 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,408 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,408 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,408 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,408 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,408 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,408 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,408 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,408 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,432 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,432 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,432 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,432 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,432 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,432 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,432 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,432 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,432 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,432 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,433 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,433 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,433 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,433 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,453 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,453 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,453 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,453 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,453 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,453 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,453 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,453 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,453 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,453 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,453 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,453 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,453 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,453 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,475 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,475 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,475 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,475 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,475 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,475 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,476 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,476 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,476 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,476 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,476 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,476 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,476 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,476 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,495 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,495 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,495 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,495 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,495 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,495 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,495 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,495 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,496 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,496 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,496 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,496 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,496 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,496 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,518 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,518 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,519 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,519 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,519 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,519 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,519 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,519 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,519 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,519 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,519 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,519 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,519 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,519 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,539 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,539 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,540 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,540 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,540 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,540 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,540 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,540 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,540 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,540 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,540 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,540 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,540 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,540 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,562 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,562 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,562 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,562 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,562 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,562 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,562 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,562 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,562 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,562 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,562 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,562 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,562 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,562 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,582 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,582 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,582 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,582 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,582 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,582 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,582 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,582 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,582 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,582 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,582 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,582 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,583 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,583 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,602 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,602 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,602 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,602 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,602 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,602 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,603 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,603 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,603 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,603 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,603 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,603 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,603 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,603 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,621 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,621 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,621 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,621 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,621 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,621 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,621 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,621 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,622 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,622 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,622 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,622 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,622 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,622 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,629 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,629 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,629 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,629 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,629 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,629 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,629 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,629 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,629 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,629 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,630 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,630 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,630 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,630 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,653 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,653 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:45:52,654 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,654 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:45:52,654 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,654 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:45:52,654 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,654 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:45:52,654 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,654 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:45:52,654 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,654 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:45:52,654 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:45:52,654 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:27,456 - root - INFO - File logging configured to chungoid_mcp_server.log
2025-05-04 07:47:27,456 - utils.logger_setup - INFO - Logging setup complete. Level: INFO
2025-05-04 07:47:27,456 - chungoidmcp - INFO - [EARLY CHECK 194188] Logging configured. __name__ = 'chungoidmcp'
2025-05-04 07:47:27,456 - chungoidmcp - INFO - Initializing Chungoid MCP Server components at module level...
2025-05-04 07:47:27,456 - chungoidmcp - INFO - Chungoid base directory determined as: /home/flip/Desktop/chungoid-mcp/chungoid-core
2025-05-04 07:47:27,457 - mcp.server.lowlevel.server - DEBUG - Initializing server 'ChungoidMCP'
2025-05-04 07:47:27,457 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-05-04 07:47:27,457 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-05-04 07:47:27,457 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-05-04 07:47:27,457 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-05-04 07:47:27,457 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-05-04 07:47:27,457 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-05-04 07:47:27,457 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-05-04 07:47:27,457 - chungoidmcp - INFO - Root logger handlers AFTER FastMCP init: [<StreamHandler <_io.FileIO name=8 mode='rb+' closefd=True> (INFO)>, <RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,458 - chungoidmcp - INFO - FastMCP instance created. StateManager initialization deferred to tool calls.
2025-05-04 07:47:27,467 - chungoidmcp - INFO - --- Inspecting Registered MCP Tools ---
2025-05-04 07:47:27,467 - chungoidmcp - WARNING - Could not access or inspect mcp.tools registry.
2025-05-04 07:47:27,467 - chungoidmcp - INFO - -------------------------------------
2025-05-04 07:47:27,486 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:27,486 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:27,486 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,486 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:27,487 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,487 - chungoidmcp - INFO - Getting project status for: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,487 - chungoidmcp - INFO - Successfully retrieved project status from /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,567 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:27,567 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:27,568 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,568 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:27,568 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,568 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:47:27,568 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,568 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:27,568 - utils.state_manager - INFO - Successfully added root RotatingFileHandler to utils.state_manager logger.
2025-05-04 07:47:27,568 - utils.state_manager - INFO - Successfully added root RotatingFileHandler to utils.state_manager logger.
2025-05-04 07:47:27,569 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,569 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,569 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,569 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,569 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,569 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,569 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:47:27,569 - utils.chroma_utils - INFO - Initializing HttpClient with host: localhost, port: 8000
2025-05-04 07:47:27,699 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/auth/identity "HTTP/1.1 200 OK"
2025-05-04 07:47:27,709 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant "HTTP/1.1 200 OK"
2025-05-04 07:47:27,711 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database "HTTP/1.1 200 OK"
2025-05-04 07:47:27,817 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:47:27,817 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:47:27,817 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,817 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,817 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,817 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,818 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,818 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,818 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,818 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:47:27,818 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,818 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,819 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,819 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,819 - utils.state_manager - INFO - get_next_stage: No runs found. Starting with Stage 0.
2025-05-04 07:47:27,819 - utils.state_manager - INFO - get_next_stage: No runs found. Starting with Stage 0.
2025-05-04 07:47:27,819 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:47:27,819 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:47:27,819 - utils.state_manager - INFO - Next stage determined: 0.0
2025-05-04 07:47:27,819 - utils.state_manager - INFO - Next stage determined: 0.0
2025-05-04 07:47:27,819 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,819 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,820 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,820 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,820 - utils.state_manager - INFO - get_last_status: No runs found in status file.
2025-05-04 07:47:27,820 - utils.state_manager - INFO - get_last_status: No runs found in status file.
2025-05-04 07:47:27,820 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:47:27,820 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:47:27,822 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:47:27,822 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:47:27,825 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,827 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,830 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,832 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,834 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,837 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,837 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,837 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:47:27,837 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:47:27,889 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:27,889 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:27,889 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,889 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:27,890 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,890 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:47:27,890 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,890 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:47:27,890 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:27,890 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.txt
2025-05-04 07:47:27,891 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:27,891 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:27,891 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,891 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,891 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,891 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,891 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,891 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,891 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,891 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,891 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,891 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,892 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,892 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,892 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,892 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,892 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,892 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,892 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,892 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,892 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,892 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,892 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,892 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.txt']
2025-05-04 07:47:27,892 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:47:27,892 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.txt' (type: document) in ChromaDB for stage 0
2025-05-04 07:47:27,894 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:27,895 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.txt' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:27,896 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:47:27,896 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:47:27,896 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,896 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,897 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,897 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,897 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:27,897 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:27,897 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,897 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,899 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:27,899 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:27,899 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:27,899 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:27,899 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:27.897252+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:27.896809+00:00",
          "artifacts": [
            "dev-docs/stage0_output.txt"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:27,899 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:27.897252+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:27.896809+00:00",
          "artifacts": [
            "dev-docs/stage0_output.txt"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:27,899 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:47:27,899 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:47:27,940 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:27,940 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:27,941 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,941 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:27,941 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,941 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:47:27,942 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,942 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:47:27,942 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:27,942 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:47:27,942 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:27,942 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:27,943 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,943 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,943 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,943 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,943 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,943 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,943 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,943 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,943 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,943 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,943 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,944 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,944 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:47:27,944 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:47:27,944 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:47:27,946 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:27,947 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:27,948 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:47:27,948 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:47:27,948 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,948 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,948 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,948 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,948 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:27,948 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:27,949 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,949 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,950 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:27,950 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:27,950 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:27,950 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:27,950 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:27.948935+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:27.948545+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:27,950 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:27.948935+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:27.948545+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:27,951 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:47:27,951 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:47:27,951 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:47:27,951 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,951 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:47:27,951 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:27,951 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:47:27,952 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:27,952 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:27,952 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,952 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,952 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,952 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,952 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,952 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,952 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,952 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,952 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,952 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,953 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,953 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,953 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,953 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,953 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,953 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,953 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,953 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,953 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,953 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,953 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,953 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:47:27,953 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:47:27,953 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:47:27,955 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:27,956 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:27,957 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:47:27,957 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:47:27,957 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,957 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,957 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,957 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,957 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:27,957 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:27,957 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,957 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,959 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:27,959 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:27,959 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:27,959 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:27,959 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:27.948935+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:27.948545+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:27.957221+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:27,959 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:27.948935+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:27.948545+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:27.957221+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:27,959 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:47:27,959 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:47:27,959 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:47:27,959 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,959 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:27,959 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:27,959 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:27,960 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,960 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:27,960 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,960 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:27,960 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,960 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:27,960 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,960 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:27,960 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,960 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:27,960 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,960 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:27,960 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,960 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,960 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,960 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:27,961 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:27,961 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:47:27,961 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:47:27,961 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:47:27,961 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 1.0.
2025-05-04 07:47:27,961 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 1.0.
2025-05-04 07:47:27,962 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:47:27,962 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:47:27,962 - utils.state_manager - INFO - Next stage determined: 2.0
2025-05-04 07:47:27,962 - utils.state_manager - INFO - Next stage determined: 2.0
2025-05-04 07:47:27,962 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,962 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:27,962 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,962 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:27,962 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 1.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:47:27.957221+00:00', 'artifacts': ['dev-docs/design/validation_report.json']}
2025-05-04 07:47:27,962 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 1.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:47:27.957221+00:00', 'artifacts': ['dev-docs/design/validation_report.json']}
2025-05-04 07:47:27,962 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:47:27,962 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:47:27,965 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:47:27,965 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:47:27,967 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,970 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,971 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,974 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,976 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,979 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,979 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:27,979 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:47:27,979 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:47:28,020 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,020 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:28,020 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,020 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:28,020 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,021 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:47:28,021 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,021 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:47:28,021 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:28,021 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:47:28,022 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,022 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,022 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,022 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,022 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,022 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,022 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,022 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,022 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,022 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,022 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,022 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,022 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,022 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,022 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,022 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,023 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,023 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,023 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,023 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,023 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,023 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,023 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,023 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:47:28,023 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:47:28,023 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:47:28,026 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,026 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,027 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:47:28,027 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:47:28,027 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,027 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,027 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,027 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,027 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:28,027 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:28,027 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,027 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,029 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,029 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,029 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,029 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,029 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.027558+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.027108+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,029 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.027558+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.027108+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,029 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:47:28,029 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:47:28,030 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:47:28,030 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,030 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:47:28,030 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:28,031 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:47:28,031 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,031 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,032 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,032 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,032 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,032 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,032 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,032 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,032 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,032 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,032 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,032 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,033 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,033 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,033 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,033 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,033 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,033 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,033 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,033 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,033 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,033 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,033 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,033 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:47:28,033 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:47:28,033 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:47:28,035 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,036 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,037 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:47:28,037 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:47:28,037 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,037 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,037 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,037 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,037 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,037 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,037 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,037 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,039 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,039 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,039 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,039 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,039 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.027558+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.027108+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.037103+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,039 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.027558+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.027108+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.037103+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,039 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:47:28,039 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:47:28,039 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='2', status='PASS'
2025-05-04 07:47:28,040 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,040 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 2
2025-05-04 07:47:28,040 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:28,040 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/implementation_plan.md
2025-05-04 07:47:28,040 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/detailed_interfaces.md
2025-05-04 07:47:28,041 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,041 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,041 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,041 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,041 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,041 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,042 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,042 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,042 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,042 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,042 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,042 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,042 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,042 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,042 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,042 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,042 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,042 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,043 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,043 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,043 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,043 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,043 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,043 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']
2025-05-04 07:47:28,043 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:47:28,043 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/implementation_plan.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:47:28,045 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,046 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/implementation_plan.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,046 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/detailed_interfaces.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:47:28,049 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,050 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/detailed_interfaces.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,050 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:47:28,050 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:47:28,051 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,051 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,051 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,051 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,051 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,051 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,051 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,051 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,052 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,052 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,053 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,053 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,053 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.027558+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.027108+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.037103+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.051040+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,053 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.027558+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.027108+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.037103+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.051040+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,053 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:47:28,053 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:47:28,053 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:47:28,053 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,053 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,053 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,053 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,053 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,053 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,053 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,053 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,054 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,054 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,054 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,054 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,054 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,054 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,054 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,054 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,054 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,054 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,054 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,054 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,055 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,055 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:47:28,055 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:47:28,055 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 2.0.
2025-05-04 07:47:28,055 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 2.0.
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:47:28,055 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:47:28,055 - utils.state_manager - INFO - Next stage determined: 3.0
2025-05-04 07:47:28,055 - utils.state_manager - INFO - Next stage determined: 3.0
2025-05-04 07:47:28,056 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,056 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,056 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,056 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,056 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 2.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:47:28.051040+00:00', 'artifacts': ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']}
2025-05-04 07:47:28,056 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 2.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:47:28.051040+00:00', 'artifacts': ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']}
2025-05-04 07:47:28,056 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:47:28,056 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:47:28,059 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:47:28,059 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:47:28,061 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,063 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,066 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,068 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,071 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,073 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,073 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,074 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:47:28,074 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:47:28,120 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,121 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:28,121 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,121 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:28,121 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,121 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='0', status='PASS'
2025-05-04 07:47:28,121 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,122 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 0
2025-05-04 07:47:28,122 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:28,122 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/stage0_output.dummy
2025-05-04 07:47:28,122 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,122 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,122 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,122 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,122 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,122 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,123 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,123 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,123 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,123 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,123 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,123 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,123 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,123 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,123 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/stage0_output.dummy']
2025-05-04 07:47:28,124 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:47:28,124 - chungoidmcp - INFO - Storing artifact 'dev-docs/stage0_output.dummy' (type: unknown) in ChromaDB for stage 0
2025-05-04 07:47:28,126 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,126 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/stage0_output.dummy' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,127 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:47:28,127 - utils.state_manager - INFO - Attempting to update status for Stage: 0.0, Status: PASS
2025-05-04 07:47:28,127 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,127 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,127 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,127 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,128 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:28,128 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:28,128 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,128 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,129 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,129 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,129 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,129 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,130 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.127994+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.127593+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,130 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.127994+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.127593+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,130 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:47:28,130 - utils.state_manager - INFO - Status update for Stage 0.0 completed successfully.
2025-05-04 07:47:28,131 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:47:28,131 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,131 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:47:28,132 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:28,132 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/design/validation_report.json
2025-05-04 07:47:28,132 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,132 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,133 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,133 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,133 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,133 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,133 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,133 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,133 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,133 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,133 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,133 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,133 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,133 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,133 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,133 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,133 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,133 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,133 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,133 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,134 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,134 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,134 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,134 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/design/validation_report.json']
2025-05-04 07:47:28,134 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:47:28,134 - chungoidmcp - INFO - Storing artifact 'dev-docs/design/validation_report.json' (type: design) in ChromaDB for stage 1
2025-05-04 07:47:28,136 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,136 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/design/validation_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,137 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:47:28,137 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:47:28,137 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,137 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,137 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,137 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,137 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,137 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,138 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,138 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,139 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,139 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,139 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,139 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,139 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.127994+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.127593+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.137486+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,139 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.127994+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.127593+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.137486+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,139 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:47:28,139 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:47:28,140 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='2', status='PASS'
2025-05-04 07:47:28,140 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,140 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 2
2025-05-04 07:47:28,140 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:28,141 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/implementation_plan.md
2025-05-04 07:47:28,141 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/planning/detailed_interfaces.md
2025-05-04 07:47:28,142 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,142 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,142 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,142 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,142 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,142 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,143 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,143 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,143 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,143 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,143 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,143 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,143 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,143 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,143 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,143 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,144 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,144 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,144 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,144 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,144 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,144 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,144 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,144 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/planning/implementation_plan.md', 'dev-docs/planning/detailed_interfaces.md']
2025-05-04 07:47:28,144 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:47:28,144 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/implementation_plan.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:47:28,147 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,148 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/implementation_plan.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,149 - chungoidmcp - INFO - Storing artifact 'dev-docs/planning/detailed_interfaces.md' (type: planning) in ChromaDB for stage 2
2025-05-04 07:47:28,151 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,151 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/planning/detailed_interfaces.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,152 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:47:28,152 - utils.state_manager - INFO - Attempting to update status for Stage: 2.0, Status: PASS
2025-05-04 07:47:28,152 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,152 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,152 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,152 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,152 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,152 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,152 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,152 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,154 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,154 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,154 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,154 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,154 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.127994+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.127593+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.137486+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.152389+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,154 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.127994+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.127593+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.137486+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.152389+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,154 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:47:28,154 - utils.state_manager - INFO - Status update for Stage 2.0 completed successfully.
2025-05-04 07:47:28,155 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='3', status='PASS'
2025-05-04 07:47:28,155 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,155 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 3
2025-05-04 07:47:28,155 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:28,155 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reports/static_analysis_report.json
2025-05-04 07:47:28,156 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reports/unit_test_report.json
2025-05-04 07:47:28,156 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,156 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,156 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,156 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,156 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,156 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,156 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,156 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,156 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,156 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,157 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,157 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,157 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,157 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,157 - chungoidmcp - INFO - Identified 2 artifacts for ChromaDB storage: ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']
2025-05-04 07:47:28,157 - chungoidmcp - INFO - Attempting to store 2 written artifacts in ChromaDB...
2025-05-04 07:47:28,157 - chungoidmcp - INFO - Storing artifact 'dev-docs/reports/static_analysis_report.json' (type: report) in ChromaDB for stage 3
2025-05-04 07:47:28,159 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,160 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reports/static_analysis_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,161 - chungoidmcp - INFO - Storing artifact 'dev-docs/reports/unit_test_report.json' (type: report) in ChromaDB for stage 3
2025-05-04 07:47:28,163 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,163 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reports/unit_test_report.json' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:28,164 - utils.state_manager - INFO - Attempting to update status for Stage: 3.0, Status: PASS
2025-05-04 07:47:28,164 - utils.state_manager - INFO - Attempting to update status for Stage: 3.0, Status: PASS
2025-05-04 07:47:28,165 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,165 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,165 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,165 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,165 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,165 - utils.state_manager - INFO - Appending status update to latest run (id: 0).
2025-05-04 07:47:28,165 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,165 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,167 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,167 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:28,167 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,167 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:28,167 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.127994+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.127593+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.137486+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.152389+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        },
        {
          "stage": 3.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.164960+00:00",
          "artifacts": [
            "dev-docs/reports/static_analysis_report.json",
            "dev-docs/reports/unit_test_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,167 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:28.127994+00:00",
      "status_updates": [
        {
          "stage": 0.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.127593+00:00",
          "artifacts": [
            "dev-docs/stage0_output.dummy"
          ]
        },
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.137486+00:00",
          "artifacts": [
            "dev-docs/design/validation_report.json"
          ]
        },
        {
          "stage": 2.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.152389+00:00",
          "artifacts": [
            "dev-docs/planning/implementation_plan.md",
            "dev-docs/planning/detailed_interfaces.md"
          ]
        },
        {
          "stage": 3.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:28.164960+00:00",
          "artifacts": [
            "dev-docs/reports/static_analysis_report.json",
            "dev-docs/reports/unit_test_report.json"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:28,167 - utils.state_manager - INFO - Status update for Stage 3.0 completed successfully.
2025-05-04 07:47:28,167 - utils.state_manager - INFO - Status update for Stage 3.0 completed successfully.
2025-05-04 07:47:28,167 - chungoidmcp - INFO - Received 'execute_next_stage' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:47:28,167 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,167 - chungoidmcp - INFO - Executing next stage for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,167 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,167 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,167 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,167 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,167 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,167 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,168 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,168 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,168 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,168 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,168 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,168 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,168 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,168 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,169 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:47:28,169 - utils.state_manager - INFO - Determining next stage based on available definitions and latest run...
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - get_next_stage: Examining latest run (id: 0).
2025-05-04 07:47:28,169 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 3.0.
2025-05-04 07:47:28,169 - utils.state_manager - INFO - get_next_stage: Highest completed stage in run 0 is 3.0.
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Available stage definitions found: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]
2025-05-04 07:47:28,169 - utils.state_manager - INFO - Next stage determined: 4.0
2025-05-04 07:47:28,169 - utils.state_manager - INFO - Next stage determined: 4.0
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,169 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,170 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 3.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:47:28.164960+00:00', 'artifacts': ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']}
2025-05-04 07:47:28,170 - utils.state_manager - DEBUG - get_last_status: Found last status in run 0: {'stage': 3.0, 'status': 'PASS', 'timestamp': '2025-05-04T12:47:28.164960+00:00', 'artifacts': ['dev-docs/reports/static_analysis_report.json', 'dev-docs/reports/unit_test_report.json']}
2025-05-04 07:47:28,170 - utils.prompt_manager - INFO - PromptManager initialized. Server Stages Dir: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages', Common Template: '/home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml'
2025-05-04 07:47:28,170 - utils.prompt_manager - INFO - Loading common template from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/common_template.yaml
2025-05-04 07:47:28,172 - utils.prompt_manager - INFO - Successfully loaded common template.
2025-05-04 07:47:28,172 - utils.prompt_manager - INFO - Loading stage definitions from /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/stages
2025-05-04 07:47:28,174 - utils.prompt_manager - ERROR - Failed to load stage definition from stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,177 - utils.prompt_manager - ERROR - Failed to load stage definition from stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,178 - utils.prompt_manager - ERROR - Failed to load stage definition from stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,181 - utils.prompt_manager - ERROR - Failed to load stage definition from stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,184 - utils.prompt_manager - ERROR - Failed to load stage definition from stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,186 - utils.prompt_manager - ERROR - Failed to load stage definition from stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,187 - utils.prompt_manager - ERROR - Encountered 6 error(s) while loading stage definitions:
stage3.yaml: Stage 3 definition missing required string keys: ['system_prompt', 'user_prompt']
stage0.yaml: Stage 0 definition missing required string keys: ['system_prompt', 'user_prompt']
stage5.yaml: Stage 5 definition missing required string keys: ['system_prompt', 'user_prompt']
stage2.yaml: Stage 2 definition missing required string keys: ['system_prompt', 'user_prompt']
stage1.yaml: Stage 1 definition missing required string keys: ['system_prompt', 'user_prompt']
stage4.yaml: Stage 4 definition missing required string keys: ['system_prompt', 'user_prompt']
2025-05-04 07:47:28,187 - stage_executor - CRITICAL - Failed to initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:47:28,187 - chungoidmcp - ERROR - Runtime error during next stage execution in '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': StageExecutor could not initialize PromptManager: Failed to load 6 stage definition file(s). See logs for details.
2025-05-04 07:47:28,248 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,249 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:28,249 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,249 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:28,249 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,249 - chungoidmcp - INFO - Received 'load_reflections' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') with args: None
2025-05-04 07:47:28,249 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,249 - chungoidmcp - INFO - Loading reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,249 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,249 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,249 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,249 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,250 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,250 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,250 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,250 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,250 - utils.state_manager - ERROR - Synchronous ChromaDB client initialization returned None.
2025-05-04 07:47:28,250 - utils.state_manager - ERROR - Synchronous ChromaDB client initialization returned None.
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,250 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,250 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,250 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,250 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,250 - chungoidmcp - INFO - Calling get_all_reflections with limit=20
2025-05-04 07:47:28,250 - utils.state_manager - ERROR - ChromaDB client was not initialized successfully. Cannot perform DB operations.
2025-05-04 07:47:28,250 - utils.state_manager - ERROR - ChromaDB client was not initialized successfully. Cannot perform DB operations.
2025-05-04 07:47:28,251 - chungoidmcp - ERROR - Error retrieving reflections via ChromaDB for target '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': ChromaDB client is not available.
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1149, in handle_load_reflections
    reflections_data = context_state_manager.get_all_reflections(limit=limit_to_load)
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 816, in get_all_reflections
    raise ChromaOperationError("ChromaDB client is not available.")
utils.state_manager.ChromaOperationError: ChromaDB client is not available.
2025-05-04 07:47:28,253 - chungoidmcp - INFO - Received 'load_reflections' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') with args: None
2025-05-04 07:47:28,253 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,253 - chungoidmcp - INFO - Loading reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,253 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,253 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,253 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,253 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,253 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,253 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,254 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,254 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,254 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,254 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,254 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,254 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,254 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,254 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,254 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,254 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,254 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,254 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,254 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:28,254 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:28,254 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,254 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,254 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,254 - chungoidmcp - INFO - Calling get_all_reflections with limit=20
2025-05-04 07:47:28,257 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,257 - utils.state_manager - DEBUG - Getting all reflections from 'chungoid_reflections' (limit: 20)
2025-05-04 07:47:28,257 - utils.state_manager - DEBUG - Getting all reflections from 'chungoid_reflections' (limit: 20)
2025-05-04 07:47:28,259 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/c4edeff1-3708-4487-9486-5ffc441f4632/get "HTTP/1.1 200 OK"
2025-05-04 07:47:28,260 - utils.state_manager - INFO - Retrieved 0 reflections from collection 'chungoid_reflections' (limit: 20).
2025-05-04 07:47:28,260 - utils.state_manager - INFO - Retrieved 0 reflections from collection 'chungoid_reflections' (limit: 20).
2025-05-04 07:47:28,260 - chungoidmcp - INFO - No reflections found via StateManager (get_all_reflections, limit: 20).
2025-05-04 07:47:28,327 - chungoidmcp - INFO - Received 'load_reflections' request (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') with args: None
2025-05-04 07:47:28,327 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,327 - chungoidmcp - INFO - Loading reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,328 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,328 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,328 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,328 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,328 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,328 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,328 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,328 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,328 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,328 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,328 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,328 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,328 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,328 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,328 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,328 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,329 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,329 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,329 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:28,329 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:28,329 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,329 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,329 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,329 - chungoidmcp - INFO - Calling get_all_reflections with limit=20
2025-05-04 07:47:28,332 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,332 - utils.state_manager - DEBUG - Getting all reflections from 'chungoid_reflections' (limit: 20)
2025-05-04 07:47:28,332 - utils.state_manager - DEBUG - Getting all reflections from 'chungoid_reflections' (limit: 20)
2025-05-04 07:47:28,335 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/c4edeff1-3708-4487-9486-5ffc441f4632/get "HTTP/1.1 200 OK"
2025-05-04 07:47:28,335 - utils.state_manager - INFO - Retrieved 0 reflections from collection 'chungoid_reflections' (limit: 20).
2025-05-04 07:47:28,335 - utils.state_manager - INFO - Retrieved 0 reflections from collection 'chungoid_reflections' (limit: 20).
2025-05-04 07:47:28,335 - chungoidmcp - INFO - No reflections found via StateManager (get_all_reflections, limit: 20).
2025-05-04 07:47:28,404 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,404 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:28,404 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,404 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:28,405 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,405 - chungoidmcp - INFO - Received 'retrieve_reflections' request for query: 'test query' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:47:28,405 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,405 - chungoidmcp - INFO - Retrieving reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,405 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,405 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,405 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,405 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,405 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,405 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,406 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,406 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,406 - utils.state_manager - ERROR - Synchronous ChromaDB client initialization returned None.
2025-05-04 07:47:28,406 - utils.state_manager - ERROR - Synchronous ChromaDB client initialization returned None.
2025-05-04 07:47:28,406 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,406 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,406 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,406 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,406 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,406 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,406 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,406 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,407 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,407 - utils.state_manager - DEBUG - Successfully read and parsed status file with {'runs': ...} structure.
2025-05-04 07:47:28,407 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,407 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,407 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,407 - utils.state_manager - ERROR - ChromaDB client was not initialized successfully. Cannot perform DB operations.
2025-05-04 07:47:28,407 - utils.state_manager - ERROR - ChromaDB client was not initialized successfully. Cannot perform DB operations.
2025-05-04 07:47:28,407 - chungoidmcp - ERROR - Error retrieving reflections via ChromaDB for target '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration': ChromaDB client is not available.
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1313, in handle_retrieve_reflections_tool
    results = context_state_manager.get_reflection_context_from_chroma(
        query=query,
        n_results=n_results,
        filter_stage_min=stage_filter_float, # Pass converted float
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 707, in get_reflection_context_from_chroma
    raise ChromaOperationError("ChromaDB client is not available.")
utils.state_manager.ChromaOperationError: ChromaDB client is not available.
2025-05-04 07:47:28,529 - chungoidmcp - INFO - Received 'retrieve_reflections' request for query: 'test query' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:47:28,529 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,529 - chungoidmcp - INFO - Retrieving reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:28,529 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,529 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:28,529 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,529 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:28,530 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,530 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:28,530 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,530 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:28,530 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,530 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:28,530 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,530 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:28,530 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,530 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:28,530 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,530 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,530 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,530 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:28,531 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:28,531 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:28,531 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,531 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:28,531 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:28,533 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:28,533 - utils.state_manager - DEBUG - Querying Chroma collection 'chungoid_reflections' for reflections: 'test query...' (n=3, filter=None)
2025-05-04 07:47:28,533 - utils.state_manager - DEBUG - Querying Chroma collection 'chungoid_reflections' for reflections: 'test query...' (n=3, filter=None)
2025-05-04 07:47:28,935 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/c4edeff1-3708-4487-9486-5ffc441f4632/query "HTTP/1.1 200 OK"
2025-05-04 07:47:28,936 - utils.state_manager - INFO - Retrieved 0 reflection context results from Chroma for query 'test query...'
2025-05-04 07:47:28,936 - utils.state_manager - INFO - Retrieved 0 reflection context results from Chroma for query 'test query...'
2025-05-04 07:47:28,936 - chungoidmcp - INFO - Successfully retrieved 0 reflections using ChromaDB query.
2025-05-04 07:47:29,003 - chungoidmcp - INFO - Received 'retrieve_reflections' request for query: 'another query' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration')
2025-05-04 07:47:29,004 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:29,004 - chungoidmcp - INFO - Retrieving reflections for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:29,004 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,004 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,004 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,004 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,004 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,004 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,005 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,005 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,005 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,005 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,005 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:29,005 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:29,005 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:29,005 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:29,006 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,006 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,006 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,006 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,006 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:29,006 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:29,006 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:29,006 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:29,007 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:29,009 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:29,010 - utils.state_manager - DEBUG - Querying Chroma collection 'chungoid_reflections' for reflections: 'another query...' (n=1, filter={'stage_number': {'$gte': 0.0}})
2025-05-04 07:47:29,010 - utils.state_manager - DEBUG - Querying Chroma collection 'chungoid_reflections' for reflections: 'another query...' (n=1, filter={'stage_number': {'$gte': 0.0}})
2025-05-04 07:47:29,324 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/c4edeff1-3708-4487-9486-5ffc441f4632/query "HTTP/1.1 200 OK"
2025-05-04 07:47:29,325 - utils.state_manager - INFO - Retrieved 0 reflection context results from Chroma for query 'another query...'
2025-05-04 07:47:29,325 - utils.state_manager - INFO - Retrieved 0 reflection context results from Chroma for query 'another query...'
2025-05-04 07:47:29,325 - chungoidmcp - INFO - Successfully retrieved 0 reflections using ChromaDB query.
2025-05-04 07:47:29,393 - chungoidmcp - INFO - Received 'submit_stage_artifacts' (explicit target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration') for stage='1', status='PASS'
2025-05-04 07:47:29,393 - chungoidmcp - INFO - Using valid directory provided via argument: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:29,393 - chungoidmcp - INFO - Submitting artifacts for effective target: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration', stage: 1
2025-05-04 07:47:29,393 - chungoidmcp - INFO - Processing artifacts explicitly provided in the tool call.
2025-05-04 07:47:29,394 - chungoidmcp - INFO - Writing explicitly provided artifact content to: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/dev-docs/reflections.md
2025-05-04 07:47:29,394 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,394 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,394 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,394 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,394 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,394 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,394 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,394 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,394 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,394 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,394 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:29,394 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid
2025-05-04 07:47:29,395 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:29,395 - utils.state_manager - DEBUG - Using real file lock: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json.lock
2025-05-04 07:47:29,395 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,395 - utils.state_manager - INFO - StateManager initialized for file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,395 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,395 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,395 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:29,395 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:29,395 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:29,395 - utils.state_manager - DEBUG - Initial status file read successful.
2025-05-04 07:47:29,395 - chungoidmcp - INFO - StateManager initialized successfully for target: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:29,395 - chungoidmcp - INFO - Identified 1 artifacts for ChromaDB storage: ['dev-docs/reflections.md']
2025-05-04 07:47:29,395 - chungoidmcp - INFO - Attempting to store 1 written artifacts in ChromaDB...
2025-05-04 07:47:29,395 - chungoidmcp - INFO - Storing artifact 'dev-docs/reflections.md' (type: reflection_doc) in ChromaDB for stage 1
2025-05-04 07:47:29,397 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
2025-05-04 07:47:29,398 - chungoidmcp - ERROR - ChromaDB Store Error: Failed to store artifact 'dev-docs/reflections.md' context: name 'hashlib' is not defined
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/chungoidmcp.py", line 1027, in handle_submit_stage_artifacts
    stored_ok = context_state_manager.store_artifact_context_in_chroma(
        rel_path=rel_path_str,
    ...<2 lines>...
        artifact_type=artifact_type_guess,
    )
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/state_manager.py", line 567, in store_artifact_context_in_chroma
    doc_id = hashlib.sha1(rel_path.encode()).hexdigest()
             ^^^^^^^
NameError: name 'hashlib' is not defined. Did you forget to import 'hashlib'?
2025-05-04 07:47:29,398 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:47:29,398 - utils.state_manager - INFO - Attempting to update status for Stage: 1.0, Status: PASS
2025-05-04 07:47:29,399 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,399 - utils.state_manager - DEBUG - Attempting to read status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,399 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:29,399 - utils.state_manager - WARNING - Status file not found at /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json, returning empty structure {'runs': []}.
2025-05-04 07:47:29,399 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:29,399 - utils.state_manager - INFO - Creating first run (id: 0) and adding status update.
2025-05-04 07:47:29,399 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,399 - utils.state_manager - DEBUG - Attempting to write to status file: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,401 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:29,401 - utils.state_manager - DEBUG - Successfully wrote to status file (post-dump, pre-release).
2025-05-04 07:47:29,401 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:29,401 - utils.state_manager - DEBUG - Lock released after write.
2025-05-04 07:47:29,401 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:29.399562+00:00",
      "status_updates": [
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:29.398986+00:00",
          "artifacts": [
            "dev-docs/reflections.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:29,401 - utils.state_manager - DEBUG - Read file back immediately after write. Content: {
  "runs": [
    {
      "run_id": 0,
      "start_timestamp": "2025-05-04T12:47:29.399562+00:00",
      "status_updates": [
        {
          "stage": 1.0,
          "status": "PASS",
          "timestamp": "2025-05-04T12:47:29.398986+00:00",
          "artifacts": [
            "dev-docs/reflections.md"
          ]
        }
      ]
    }
  ]
}
2025-05-04 07:47:29,401 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:47:29,401 - utils.state_manager - INFO - Status update for Stage 1.0 completed successfully.
2025-05-04 07:47:29,465 - chungoidmcp - INFO - handle_initialize_project called. Target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'
2025-05-04 07:47:29,465 - chungoidmcp - INFO - Proceeding with initialization in target_directory: '/home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration'.
2025-05-04 07:47:29,466 - chungoidmcp - INFO - Resolved target directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration
2025-05-04 07:47:29,466 - chungoidmcp - INFO - Ensuring target directory structure exists...
2025-05-04 07:47:29,466 - chungoidmcp - INFO - Copied /home/flip/Desktop/chungoid-mcp/chungoid-core/server_prompts/initial_status.json to /home/flip/Desktop/chungoid-mcp/chungoid-core/test_project_integration/.chungoid/project_status.json
2025-05-04 07:47:29,507 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:47:29,507 - utils.chroma_utils - INFO - Initializing HttpClient with host: bad_host, port: 1111
2025-05-04 07:47:29,507 - utils.chroma_utils - ERROR - Failed to initialize ChromaDB client: Connection refused
Traceback (most recent call last):
  File "/home/flip/Desktop/chungoid-mcp/chungoid-core/utils/chroma_utils.py", line 76, in get_chroma_client
    _client = chromadb.HttpClient(host=host, port=port)
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
Exception: Connection refused
2025-05-04 07:47:29,508 - utils.chroma_utils - WARNING - Returning None for ChromaDB client.
2025-05-04 07:47:29,509 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:47:29,509 - utils.chroma_utils - INFO - Initializing HttpClient with host: partial_host, port: 8000
2025-05-04 07:47:29,509 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:47:29,510 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:47:29,511 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:47:29,511 - utils.chroma_utils - INFO - Initializing HttpClient with host: localhost, port: 8000
2025-05-04 07:47:29,511 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:47:29,511 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:47:29,513 - utils.chroma_utils - INFO - Determining client type: http, persist_path: ./chroma
2025-05-04 07:47:29,513 - utils.chroma_utils - INFO - Initializing HttpClient with host: env_host, port: 9999
2025-05-04 07:47:29,513 - utils.chroma_utils - INFO - HttpClient initialized.
2025-05-04 07:47:29,513 - utils.chroma_utils - INFO - ChromaDB client initialization successful.
2025-05-04 07:47:29,596 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,596 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,596 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,596 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,596 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,596 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,596 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,596 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,596 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,596 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,596 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,596 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,597 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,597 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,618 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,618 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,618 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,618 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,618 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,618 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,618 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,618 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,619 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,619 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,619 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,619 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,619 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,619 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,641 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,641 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,641 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,641 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,641 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,641 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,641 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,641 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,642 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,642 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,642 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,642 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,642 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,642 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,670 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,670 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,670 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,670 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,670 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,670 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,670 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,670 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,670 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,670 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,671 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,671 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,671 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,671 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,695 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,695 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,696 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,696 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,696 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,696 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,696 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,696 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,696 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,696 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,696 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,696 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,696 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,696 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,718 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,718 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,718 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,718 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,718 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,718 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,718 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,718 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,719 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,719 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,719 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,719 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,719 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,719 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,740 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,740 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,740 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,740 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,740 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,740 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,741 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,741 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,741 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,741 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,741 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,741 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,741 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,741 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,765 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,765 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,765 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,765 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,765 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,765 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,765 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,765 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,765 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,765 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,766 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,766 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,766 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,766 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,786 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,786 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,787 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,787 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,787 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,787 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,787 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,787 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,787 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,787 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,787 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,787 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,787 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,787 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,807 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,807 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,807 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,807 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,808 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,808 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,808 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,808 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,808 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,808 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,808 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,808 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,808 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,808 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,826 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,826 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,827 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,827 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,827 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,827 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,827 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,827 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,827 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,827 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,827 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,827 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,827 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,827 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,834 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,834 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,834 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,834 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,834 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,834 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,834 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,834 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,834 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,834 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,835 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,835 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,835 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,835 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,858 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,858 - utils.state_manager - DEBUG - Root RotatingFileHandler already present on utils.state_manager logger.
2025-05-04 07:47:29,858 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,858 - utils.state_manager - INFO - Checking utils.state_manager logger propagation: True
2025-05-04 07:47:29,859 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,859 - utils.state_manager - INFO - Checking utils.state_manager logger handlers: [<RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:47:29,859 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,859 - utils.state_manager - INFO - Attempting synchronous ChromaDB client initialization...
2025-05-04 07:47:29,859 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,859 - utils.state_manager - INFO - Synchronous ChromaDB client initialization successful.
2025-05-04 07:47:29,859 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,859 - utils.state_manager - DEBUG - Ensured .chungoid directory exists: /home/flip/Desktop/chungoid-mcp/chungoid-core/test_sm_target/.chungoid
2025-05-04 07:47:29,859 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:47:29,859 - utils.state_manager - ERROR - Server stages directory not found or not a directory: /home/flip/Desktop/chungoid-mcp/chungoid-core/dummy_stages_for_test
2025-05-04 07:51:50,769 - root - INFO - File logging configured to chungoid_mcp_server.log
2025-05-04 07:51:50,769 - utils.logger_setup - INFO - Logging setup complete. Level: INFO
2025-05-04 07:51:50,769 - chungoidmcp - INFO - [EARLY CHECK 195014] Logging configured. __name__ = 'chungoidmcp'
2025-05-04 07:51:50,769 - chungoidmcp - INFO - Initializing Chungoid MCP Server components at module level...
2025-05-04 07:51:50,770 - chungoidmcp - INFO - Chungoid base directory determined as: /home/flip/Desktop/chungoid-mcp/chungoid-core
2025-05-04 07:51:50,770 - mcp.server.lowlevel.server - DEBUG - Initializing server 'ChungoidMCP'
2025-05-04 07:51:50,771 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-05-04 07:51:50,771 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-05-04 07:51:50,771 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-05-04 07:51:50,771 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-05-04 07:51:50,771 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-05-04 07:51:50,771 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-05-04 07:51:50,771 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-05-04 07:51:50,771 - chungoidmcp - INFO - Root logger handlers AFTER FastMCP init: [<StreamHandler <_io.FileIO name=8 mode='rb+' closefd=True> (INFO)>, <RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:51:50,771 - chungoidmcp - INFO - FastMCP instance created. StateManager initialization deferred to tool calls.
2025-05-04 07:51:50,780 - chungoidmcp - INFO - --- Inspecting Registered MCP Tools ---
2025-05-04 07:51:50,780 - chungoidmcp - WARNING - Could not access or inspect mcp.tools registry.
2025-05-04 07:51:50,780 - chungoidmcp - INFO - -------------------------------------
2025-05-04 07:53:03,764 - root - INFO - File logging configured to chungoid_mcp_server.log
2025-05-04 07:53:03,764 - utils.logger_setup - INFO - Logging setup complete. Level: INFO
2025-05-04 07:53:03,765 - chungoidmcp - INFO - [EARLY CHECK 195224] Logging configured. __name__ = 'chungoidmcp'
2025-05-04 07:53:03,765 - chungoidmcp - INFO - Initializing Chungoid MCP Server components at module level...
2025-05-04 07:53:03,765 - chungoidmcp - INFO - Chungoid base directory determined as: /home/flip/Desktop/chungoid-mcp/chungoid-core
2025-05-04 07:53:03,766 - mcp.server.lowlevel.server - DEBUG - Initializing server 'ChungoidMCP'
2025-05-04 07:53:03,766 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-05-04 07:53:03,766 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-05-04 07:53:03,766 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-05-04 07:53:03,766 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-05-04 07:53:03,766 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-05-04 07:53:03,766 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-05-04 07:53:03,766 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-05-04 07:53:03,766 - chungoidmcp - INFO - Root logger handlers AFTER FastMCP init: [<StreamHandler <_io.FileIO name=8 mode='rb+' closefd=True> (INFO)>, <RotatingFileHandler /home/flip/Desktop/chungoid-mcp/chungoid-core/chungoid_mcp_server.log (DEBUG)>]
2025-05-04 07:53:03,766 - chungoidmcp - INFO - FastMCP instance created. StateManager initialization deferred to tool calls.
2025-05-04 07:53:03,777 - chungoidmcp - INFO - --- Inspecting Registered MCP Tools ---
2025-05-04 07:53:03,778 - chungoidmcp - WARNING - Could not access or inspect mcp.tools registry.
2025-05-04 07:53:03,778 - chungoidmcp - INFO - -------------------------------------
